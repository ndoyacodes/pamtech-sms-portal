import{l as s,g as e,r as a,j as t,B as i,n as l}from"./index-DgsANLC3.js";import{L as r}from"./use-auth-store-DlB6JPqf.js";import{B as d}from"./badge-DkFHinrL.js";import{u as n,S as c,T as m,U as x}from"./user-nav-BjY9odv6.js";import{T as o,a as j,b as p,d as h}from"./tabs-DS2VtIrA.js";import{c as g}from"./campaign.service-DA5zuygM.js";import{D as u,c as N}from"./columns-DJrieg8g.js";import{m as y}from"./message.service-zEf1GUs7.js";import{f as v}from"./format-2Kviky6Q.js";import"./index-8bOQzAwE.js";import"./index-D_xSc7Or.js";import"./index-ccUYw2Nl.js";import"./Combination-BCJfLLTG.js";import"./index-ByCmscx5.js";import"./index-BuCM2Ckj.js";import"./index-BQ1RgSiI.js";import"./input-BaSBk-Gd.js";import"./instance-SAW19xTi.js";import"./table-DgNG9M6V.js";import"./select-B9KeDb6u.js";import"./index-DCG-2Pmh.js";import"./index-BEsgrMAU.js";import"./index-B0zZW6rS.js";import"./index.esm-3KLEzfMo.js";import"./zod-8yhIYjTx.js";import"./form-CU8rwvsz.js";import"./label-BTdkY-TR.js";import"./senderid.services-ChtNoxr4.js";import"./checkbox-CDTCacFG.js";const f=()=>{var f;const b=s(),D=null==(f=e().state)?void 0:f.campaign,{data:S}=n({queryKey:["campaign-logs",null==D?void 0:D.id],queryFn:async()=>await g.getCampaignLogsById(null==D?void 0:D.id)||[],retry:2,staleTime:3e5}),[w,M]=a.useState({pageIndex:0,pageSize:10}),[A,C]=a.useState({filters:[{key:"campaign.id",operator:"EQUAL",field_type:"STRING",value:D.id,values:[D.id]}],sorts:[{key:"id",direction:"DESC"}],page:0,size:10}),{data:I,isLoading:E,refetch:k}=n({queryKey:["all-sms",w.pageIndex,w.pageSize,A],queryFn:async()=>{const s={...A,page:w.pageIndex,size:w.pageSize},e=await y.getMessages({...s});return e||{content:e.content||[],totalElements:null==e?void 0:e.totalElements}},retry:2,staleTime:3e5});return t.jsxs(r,{children:[t.jsxs(r.Header,{sticky:!0,className:"mt-4 sm:mt-4 md:mt-0 lg:mt-0",children:[t.jsx(c,{}),t.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[t.jsx(m,{}),t.jsx(x,{})]})]}),t.jsxs(r.Body,{children:[t.jsx("div",{className:"ml-auto flex items-center space-x-4",children:t.jsx(i,{onClick:()=>b("/automations"),children:"Back to Automations"})}),t.jsxs(o,{orientation:"vertical",defaultValue:"campaign-details",className:"space-y-4",children:[t.jsx("div",{className:"mt-3 w-full overflow-x-auto pb-2",children:t.jsxs(j,{children:[t.jsx(p,{value:"campaign-details",children:"Campaign Details"}),t.jsx(p,{value:"messages",children:"Messages"}),t.jsx(p,{value:"logs",children:"Campaign history"})]})}),t.jsx(h,{value:"campaign-details",className:"space-y-4 ",children:t.jsxs("div",{className:" ",children:[t.jsx("h1",{className:"mb-6 text-3xl font-bold",children:D.name}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Basic Information"}),t.jsxs("div",{className:"space-y-4",children:["45",t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),t.jsx("p",{className:"text-lg",children:D.description||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),t.jsx(d,{variant:D.active?"success":"destructive",children:D.active?"Active":"Inactive"})]})]})]}),t.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Schedule"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Start Date"}),t.jsx("p",{className:"text-lg",children:(null==D?void 0:D.startDate)&&v(new Date(D.startDate),"yyyy-MM-dd")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"End Date"}),t.jsx("p",{className:"text-lg",children:(null==D?void 0:D.endDate)&&v(new Date(D.endDate),"yyyy-MM-dd")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Recurring Period"}),t.jsx("p",{className:"text-lg",children:D.recurringPeriod||"N/A"})]})]})]}),t.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Sender and Message"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Sender"}),t.jsx("p",{className:"text-lg",children:D.sender||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Message Template"}),t.jsx("p",{className:"text-lg",children:D.messageTemplate||"N/A"})]})]})]}),t.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Additional Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Next Run"}),t.jsx("p",{className:"text-lg",children:D.nextRun?l(D.nextRun).format("yyyy-MM-DD HH:mm:ss"):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Recurring"}),t.jsx("p",{className:"text-lg",children:D.recurring?"Yes":"No"})]})]})]})]})]})}),t.jsxs(h,{value:"messages",className:"space-y-4",children:[t.jsx("h1",{className:"mb-6 text-3xl font-bold",children:"Sms Log"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsx(u,{data:null==I?void 0:I.content,columns:N,pagination:w,onPaginationChange:M,totalElements:(null==I?void 0:I.totalElements)||0,onFilterSubmit:s=>(C(s),M({pageIndex:0,pageSize:w.pageSize}),k())})})]}),t.jsxs(h,{value:"logs",className:"space-y-4",children:[t.jsx("h1",{className:"mb-6 text-3xl font-bold",children:"Campaign History"}),t.jsx("div",{className:"overflow-x-auto",children:E?t.jsx("div",{className:"flex h-64 items-center justify-center",children:t.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):0===(null==S?void 0:S.length)?t.jsx("p",{className:"text-lg text-gray-500",children:"No logs available"}):t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),t.jsx("th",{className:"px-4 py-2 text-left",children:"Run Description"}),t.jsx("th",{className:"px-4 py-2 text-left",children:"Status"})]})}),t.jsx("tbody",{children:S.map((s=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-2",children:l(s.createdAt).format("yyyy-MM-DD HH:mm:ss")}),t.jsx("td",{className:"px-4 py-2",children:s.runDescription}),t.jsx("td",{className:"px-4 py-2",children:t.jsx(d,{variant:"COMPLETED"===s.status?"success":"destructive",children:s.status})})]},s.id)))})]})})]})]})]})]})};export{f as default};
