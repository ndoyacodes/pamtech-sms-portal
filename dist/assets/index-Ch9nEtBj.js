import{j as e,B as r,k as A,r as d,c as C}from"./index-d9TgJTTy.js";import{D as f,f as z,b as w,c as H,d as P,g as E,u as R,a as M,e as h,L as p}from"./use-auth-store-CiawQdvf.js";import{u as U,S as K,T as L,U as q}from"./user-nav-1-09pvFT.js";import{u as $,g as B,a as G,b as O,c as Q,d as J,e as W,T as X,f as Y,h as j,i as Z,j as S,k as _,l as v}from"./table-DaUOpY8m.js";import{D as ee,C as se,d as ae,e as te,M as le,f as ne,A as y,g as b,h as ie,E as re,i as oe}from"./index-CD610jSn.js";import{S as ce,a as de,b as xe,c as me,d as ge}from"./select-cMMktxW9.js";import{I as he}from"./input-DpwfBUf3.js";import{I as ue}from"./IconPlus-DdfCuiNF.js";import{C as I}from"./checkbox-BGteumho.js";import{u as pe}from"./users.service-DRPy6hSM.js";import"./index-Chc_HW3c.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./instance-BGpPafi2.js";import"./index-W6PM2pC6.js";import"./index-BCvMni3w.js";function je({table:s}){return e.jsxs("div",{className:"flex items-center justify-between overflow-auto px-2",children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(ce,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(de,{className:"h-8 w-[70px]",children:e.jsx(xe,{placeholder:s.getState().pagination.pageSize})}),e.jsx(me,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(ge,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(r,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(ee,{className:"h-4 w-4"})]}),e.jsxs(r,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(se,{className:"h-4 w-4"})]}),e.jsxs(r,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(ae,{className:"h-4 w-4"})]}),e.jsxs(r,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(te,{className:"h-4 w-4"})]})]})]})]})}function fe({table:s}){return e.jsxs(f,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(r,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(w,{align:"end",className:"w-[150px]",children:[e.jsx(H,{children:"Toggle columns"}),e.jsx(P,{}),s.getAllColumns().filter(a=>typeof a.accessorFn<"u"&&a.getCanHide()).map(a=>e.jsx(E,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:t=>a.toggleVisibility(!!t),children:a.id},a.id))]})]})}function we({table:s}){var i;const a=s.getState().columnFilters.length>0,{user:t}=R(),u=A();return console.log("Auth user ",t),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(he,{placeholder:"Filter ...",value:((i=s.getColumn("title"))==null?void 0:i.getFilterValue())??"",onChange:x=>{var c;return(c=s.getColumn("title"))==null?void 0:c.setFilterValue(x.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsx("div",{className:"flex gap-x-2",children:(t==null?void 0:t.customer)&&(t==null?void 0:t.role)==="ADMIN"&&e.jsxs(r,{variant:"default",onClick:()=>u("/users/add"),className:"h-8 px-2 lg:px-3",children:["New User",e.jsx(ue,{className:"ml-2 h-4 w-4"})]})}),a&&e.jsxs(r,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(ne,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(fe,{table:s})]})}function Ne({columns:s,data:a,pagination:t,onPaginationChange:u,totalElements:i}){var N;const[x,c]=d.useState({}),[o,D]=d.useState({}),[k,T]=d.useState([]),[F,V]=d.useState([]),m=$({data:a,columns:s,state:{sorting:F,columnVisibility:o,rowSelection:x,columnFilters:k,pagination:t},manualPagination:!0,pageCount:Math.ceil(i/t.pageSize),onPaginationChange:n=>{const l=typeof n=="function"?n(t):n;u(l)},enableRowSelection:!0,onRowSelectionChange:c,onSortingChange:V,onColumnFiltersChange:T,onColumnVisibilityChange:D,getCoreRowModel:B(),getFilteredRowModel:G(),getPaginationRowModel:O(),getSortedRowModel:Q(),getFacetedRowModel:J(),getFacetedUniqueValues:W()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(we,{table:m}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(X,{children:[e.jsx(Y,{children:m.getHeaderGroups().map(n=>e.jsx(j,{children:n.headers.map(l=>e.jsx(Z,{colSpan:l.colSpan,children:l.isPlaceholder?null:S(l.column.columnDef.header,l.getContext())},l.id))},n.id))}),e.jsx(_,{children:(N=m.getRowModel().rows)!=null&&N.length?m.getRowModel().rows.map(n=>e.jsx(j,{"data-state":n.getIsSelected()&&"selected",children:n.getVisibleCells().map(l=>e.jsx(v,{children:S(l.column.columnDef.cell,l.getContext())},l.id))},n.id)):e.jsx(j,{children:e.jsx(v,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(je,{table:m})]})}function g({column:s,title:a,className:t}){return s.getCanSort()?e.jsx("div",{className:C("flex items-center space-x-2",t),children:e.jsxs(f,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(r,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(y,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(b,{className:"ml-2 h-4 w-4"}):e.jsx(ie,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(w,{align:"start",children:[e.jsxs(h,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(b,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(h,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(y,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.jsx(P,{}),e.jsxs(h,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(re,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):e.jsx("div",{className:C(t),children:a})}function Ce({row:s}){const{user:a}=R();return(a==null?void 0:a.role)==="ADMIN"&&e.jsxs(f,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(r,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(w,{align:"end",className:"w-[160px]",children:[e.jsx(h,{children:"Edit"}),e.jsx(h,{children:"Disable"})]})]})}const Se=[{id:"select",header:({table:s})=>e.jsx(I,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(I,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:s})=>e.jsx(g,{column:s,title:"#"}),cell:({row:s})=>e.jsx("div",{className:"w-[80px]",children:s.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"firstName",header:({column:s})=>e.jsx(g,{column:s,title:"Name"}),cell:({row:s})=>e.jsx("div",{className:"w-[150px]",children:`${s.original.firstName} ${s.original.lastName}`})},{accessorKey:"email",header:({column:s})=>e.jsx(g,{column:s,title:"Email Address"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("email")})},{accessorKey:"phoneNumber",header:({column:s})=>e.jsx(g,{column:s,title:"Phone Number"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("phoneNumber")})},{accessorKey:"role",header:({column:s})=>e.jsx(g,{column:s,title:"Role"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("role")})},{id:"actions",cell:({row:s})=>e.jsx(Ce,{row:s})}];function qe(){const[s,a]=d.useState({pageIndex:0,pageSize:10}),[t,u]=d.useState({filters:[],sorts:[{key:"id",direction:"ASC"}],page:0,size:10}),{data:i,isLoading:x}=U({queryKey:["users",s.pageIndex,s.pageSize,t],queryFn:async()=>{const c={...t,page:s.pageIndex,size:s.pageSize},o=await pe.getUsers(c);return o||{content:o.content||[],totalElements:o==null?void 0:o.totalElements}},retry:2,staleTime:5*60*1e3});return e.jsxs(p,{children:[e.jsxs(p.Header,{sticky:!0,className:"mt-4 sm:mt-4 md:mt-0 lg:mt-0",children:[e.jsx(K,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(L,{}),e.jsx(q,{})]})]}),e.jsxs(p.Body,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's a list of all users"})]})}),x?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(Ne,{data:i.content||[],columns:Se,pagination:s,onPaginationChange:a,totalElements:(i==null?void 0:i.totalElements)||0})})]})]})}export{qe as default};
