import{r as e,m as s,j as r,B as a,y as o}from"./index-DgsANLC3.js";import{D as t,a as i,b as n,c,d}from"./dialog-Cxh4_yU0.js";import{L as l}from"./label-BTdkY-TR.js";import{u}from"./customer-hook-DtrhpQio.js";import{T as m}from"./textarea-B6_lc-Cl.js";const p=({customerId:p,actionType:j,onClose:v})=>{const[h,C]=e.useState(""),{approveCustomer:x}=u(),y=s();return r.jsx(t,{open:!0,onOpenChange:v,children:r.jsxs(i,{children:[r.jsxs(n,{children:[r.jsx(c,{children:"Customer Approval"}),r.jsx(d,{children:`Are you sure you want to ${j.toLowerCase()} this customer?`})]}),r.jsx("div",{className:"space-y-4 py-4",children:"REJECT"===j&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(l,{htmlFor:"remarks",children:"Remarks"}),r.jsx(m,{id:"remarks",placeholder:"Enter remarks",value:h,onChange:e=>C(e.target.value),required:!0})]})}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(a,{variant:"secondary",onClick:v,children:"Cancel"}),r.jsx(a,{variant:"APPROVE"===j||"ACTIVATE"===j?"default":"destructive",loading:x.isPending,onClick:async()=>{if("REJECT"===j&&!h.trim())return void o.error("Remarks are required for rejection.");const e="APPROVE"===j||"ACTIVATE"===j;x.mutate({id:p,remarks:h,approved:e},{onSuccess:()=>{y.invalidateQueries({queryKey:["customers"]}),o.success(e?"Customer approved successfully!":"Customer rejected / deactivated successfully!"),v()},onError:e=>{var s,r;const a=(null==(r=null==(s=null==e?void 0:e.response)?void 0:s.data)?void 0:r.message)||"Failed to process the request.";o.error(a)}})},disabled:x.isPending,children:(f=j.toLowerCase(),f.charAt(0).toUpperCase()+f.slice(1))})]})]})});var f};export{p as C};
