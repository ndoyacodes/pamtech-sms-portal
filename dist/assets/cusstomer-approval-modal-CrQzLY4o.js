import{r as j,l as v,j as e,B as u,y as l}from"./index-d9TgJTTy.js";import{D as g,a as f,b as E,c as A,d as k}from"./dialog-BlA-gPk4.js";import{L as R}from"./label-BkzUlrRU.js";import{u as y}from"./customer-hook-91Ge935x.js";import{T as D}from"./textarea-DzV--754.js";const w=({customerId:d,actionType:s,onClose:a})=>{const[t,m]=j.useState(""),{approveCustomer:o}=y(),p=v();console.log(s);function C(r){return r.charAt(0).toUpperCase()+r.slice(1)}const h=async()=>{if(s==="REJECT"&&!t.trim()){l.error("Remarks are required for rejection.");return}const r=s==="APPROVE"||s==="ACTIVATE";o.mutate({id:d,remarks:t,approved:r},{onSuccess:()=>{p.invalidateQueries({queryKey:["customers"]}),l.success(r?"Customer approved successfully!":"Customer rejected / deactivated successfully!"),a()},onError:i=>{var n,c;const x=((c=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:c.message)||"Failed to process the request.";l.error(x)}})};return e.jsx(g,{open:!0,onOpenChange:a,children:e.jsxs(f,{children:[e.jsxs(E,{children:[e.jsx(A,{children:"Customer Approval"}),e.jsx(k,{children:`Are you sure you want to ${s.toLowerCase()} this customer?`})]}),e.jsx("div",{className:"space-y-4 py-4",children:s==="REJECT"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"remarks",children:"Remarks"}),e.jsx(D,{id:"remarks",placeholder:"Enter remarks",value:t,onChange:r=>m(r.target.value),required:!0})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(u,{variant:s==="APPROVE"||s==="ACTIVATE"?"default":"destructive",loading:o.isPending,onClick:h,disabled:o.isPending,children:C(s.toLowerCase())})]})]})})};export{w as C};
