import{f as C,j as e,B as N}from"./index-d9TgJTTy.js";import{z as a}from"./index-C3hmKdn7.js";import{t as v}from"./zod-CLsu2KRF.js";import{u as y}from"./index.esm-B6ab4Cq_.js";import{F as P,a as t,b as o,c as i,d as c,e as d}from"./form-DxQsSBla.js";import{S,a as L,b as Y,c as E,d as m}from"./select-cMMktxW9.js";import{I as g}from"./input-DpwfBUf3.js";import{L as x}from"./use-auth-store-CiawQdvf.js";import{S as F,T as k,U as I}from"./user-nav-1-09pvFT.js";import{C as b}from"./checkbox-BGteumho.js";import{u as V}from"./plan-hooks-BiPaak9a.js";import{I as w}from"./IconUserPlus-DYgjrEXF.js";import"./label-BkzUlrRU.js";import"./index-Chc_HW3c.js";import"./index-CD610jSn.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-W6PM2pC6.js";import"./index-BCvMni3w.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./instance-BGpPafi2.js";import"./useMutation-scFYzLXQ.js";import"./plan.service-DETDn82p.js";const A=a.object({name:a.string(),pricePerSms:a.number(),billingCycle:a.enum(["DAILY","WEEKLY","MONTHLY","YEARLY"]),customerVisible:a.boolean(),popular:a.boolean()}),oe=()=>{var u;const r=(u=C().state)==null?void 0:u.record,{createPlan:h,updatePlan:p}=V(),l=y({resolver:v(A),defaultValues:r||{name:"",pricePerSms:0,billingCycle:"MONTHLY",customerVisible:!1,popular:!1}}),f=s=>{const n={...s};console.log(n),r?p.mutate({id:r.id,data:{...n,id:r.id}}):h.mutate({data:n})},j=h.isPending||p.isPending;return e.jsxs(x,{children:[e.jsxs(x.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[e.jsx(F,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(k,{}),e.jsx(I,{})]})]}),e.jsxs(x.Body,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:r?"Edit Plan":"Add New Plan"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Update the plan details below":"Fill in the form below to create a new plan"})]})}),e.jsx(P,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(f),children:[e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{control:l.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Plan Name"}),e.jsx(c,{children:e.jsx(g,{placeholder:"Enter plan name",...s})}),e.jsx(d,{})]})}),e.jsx(t,{control:l.control,name:"pricePerSms",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Price"}),e.jsx(c,{children:e.jsx(g,{type:"number",placeholder:"Enter price",...s,onChange:n=>s.onChange(parseFloat(n.target.value))})}),e.jsx(d,{})]})}),e.jsx(t,{control:l.control,name:"billingCycle",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Billing Cycle"}),e.jsx(c,{children:e.jsxs(S,{value:s.value,onValueChange:s.onChange,children:[e.jsx(L,{children:e.jsx(Y,{placeholder:"Select billing cycle"})}),e.jsxs(E,{children:[e.jsx(m,{value:"DAILY",children:"Daily"}),e.jsx(m,{value:"WEEKLY",children:"Weekly"}),e.jsx(m,{value:"MONTHLY",children:"Monthly"}),e.jsx(m,{value:"YEARLY",children:"Yearly"})]})]})}),e.jsx(d,{})]})}),e.jsx(t,{control:l.control,name:"customerVisible",render:({field:s})=>e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(c,{children:e.jsx(b,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(i,{children:"Customer Visible"}),(r==null?void 0:r.customerVisible)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot change visibility of existing plans"})]})}),e.jsx(t,{control:l.control,name:"popular",render:({field:s})=>e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(c,{children:e.jsx(b,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(i,{children:"Mark as Popular Plan"})]})})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs(N,{type:"submit",className:"",loading:j,disabled:j,children:[r?"Update Plan":"Create Plan",e.jsx(w,{className:"ml-2 h-4 w-4"})]})})]})})]})]})};export{oe as default};
