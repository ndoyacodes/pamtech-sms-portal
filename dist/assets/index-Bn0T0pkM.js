import{b as e,r as s,j as a,B as t,y as r}from"./index-DgsANLC3.js";import{C as i,c as n}from"./card-Cxkzk52A.js";import{F as d,a as l,b as c,c as o,d as m,f as x}from"./form-CU8rwvsz.js";import{I as j}from"./input-BaSBk-Gd.js";import{u as p}from"./index.esm-3KLEzfMo.js";import{L as h}from"./use-auth-store-DlB6JPqf.js";import{S as y,T as u,U as f,d as v}from"./user-nav-BjY9odv6.js";import{a as g,I as N}from"./IconEye-D2NhOiI9.js";import"./label-BTdkY-TR.js";import"./index-D_xSc7Or.js";import"./index-8bOQzAwE.js";import"./index-ccUYw2Nl.js";import"./Combination-BCJfLLTG.js";import"./index-ByCmscx5.js";import"./index-BuCM2Ckj.js";import"./index-BQ1RgSiI.js";import"./instance-SAW19xTi.js";
/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b=e("outline","copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);const k=()=>{const[e,k]=s.useState({apiKey:"",expired:!1,expiryDate:"",createdAt:"",id:null}),[A,C]=s.useState(!1),[w,D]=s.useState(!1),[I,T]=s.useState(!1),S=p({defaultValues:{endpoint:"https://opessms.yared.codes/api/v1/sms/send"}});s.useEffect((()=>{(async()=>{try{C(!0);const e=await v.generateCustomerApiKey();(null==e?void 0:e.body)&&k(e.body)}catch(e){r.error("Failed to fetch API Token details")}finally{C(!1)}})()}),[]);const P=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return a.jsxs(h,{children:[a.jsxs(h.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[a.jsx(y,{}),a.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[a.jsx(u,{}),a.jsx(f,{})]})]}),a.jsx(h.Body,{children:a.jsxs("div",{className:"max-w-4xl",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-6",children:[a.jsx("span",{children:"Dashboard"}),a.jsx("span",{children:"/"}),a.jsx("span",{children:"Developers"})]}),a.jsx(i,{children:a.jsxs(n,{className:"p-6",children:[a.jsxs("div",{className:"flex gap-4 mb-8",children:[a.jsx(t,{variant:"default",onClick:async()=>{try{C(!0);const e=await v.generateCustomerApiKey();(null==e?void 0:e.body)&&(k(e.body),D(!0),r.success("API Token Regenerated Successfully"))}catch(e){r.error("Failed to regenerate API Token, Please try again later!")}finally{C(!1)}},loading:A,children:"Regenerate Token"}),a.jsx(t,{variant:"outline",children:"Read the Docs"})]}),a.jsx(d,{...S,children:a.jsxs("div",{className:"space-y-6",children:[a.jsx(l,{name:"endpoint",render:({field:e})=>a.jsxs(c,{children:[a.jsx(o,{className:"text-sm font-medium",children:"API Endpoint"}),a.jsx(m,{children:a.jsx(j,{...e,readOnly:!0})})]})}),a.jsxs(c,{children:[a.jsx(o,{className:"text-sm font-medium",children:"API Token"}),a.jsxs("div",{className:"relative",children:[a.jsx(j,{value:w?e.apiKey:"••••••••••••••••",readOnly:!0,className:"pr-24"}),a.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-2",children:[a.jsx(t,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(!w),children:w?a.jsx(g,{className:"h-4 w-4"}):a.jsx(N,{className:"h-4 w-4"})}),a.jsx(t,{type:"button",variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(e.apiKey),T(!0),setTimeout((()=>T(!1)),2e3)},children:a.jsx(b,{className:"h-4 w-4"})})]})]}),I&&a.jsx(x,{className:"text-green-600",children:"Copied to clipboard!"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs(c,{children:[a.jsx(o,{className:"text-sm font-medium",children:"Expiry Date"}),a.jsx(m,{children:a.jsx(j,{value:e.expiryDate?P(e.expiryDate):"N/A",readOnly:!0,className:e.expired?"text-red-500":""})}),e.expired&&a.jsx(x,{className:"text-red-500",children:"Token has expired"})]}),a.jsxs(c,{children:[a.jsx(o,{className:"text-sm font-medium",children:"Created At"}),a.jsx(m,{children:a.jsx(j,{value:e.createdAt?P(e.createdAt):"N/A",readOnly:!0})})]})]})]})})]})})]})})]})};export{k as default};
