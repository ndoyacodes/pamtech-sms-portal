import{g as e,j as s,B as l}from"./index-DgsANLC3.js";import{z as r}from"./index-B0zZW6rS.js";import{t as i}from"./zod-8yhIYjTx.js";import{u as n}from"./index.esm-3KLEzfMo.js";import{F as a,a as t,b as o,c,d,e as m}from"./form-CU8rwvsz.js";import{S as j,a as x,b as h,c as p,d as u}from"./select-B9KeDb6u.js";import{I as f}from"./input-BaSBk-Gd.js";import{L as g}from"./use-auth-store-DlB6JPqf.js";import{S as b,T as v,U as C}from"./user-nav-BjY9odv6.js";import{C as N}from"./checkbox-CDTCacFG.js";import{u as y}from"./plan-hooks-BSf6LFVi.js";import{I as P}from"./IconUserPlus-DUhuP9Hl.js";import"./label-BTdkY-TR.js";import"./index-D_xSc7Or.js";import"./index-8bOQzAwE.js";import"./index-ccUYw2Nl.js";import"./Combination-BCJfLLTG.js";import"./index-ByCmscx5.js";import"./index-DCG-2Pmh.js";import"./index-BEsgrMAU.js";import"./index-BuCM2Ckj.js";import"./index-BQ1RgSiI.js";import"./instance-SAW19xTi.js";import"./useMutation-Bxa_RUaj.js";import"./plan.service-VTolrMSm.js";const Y=r.object({name:r.string(),pricePerSms:r.number(),billingCycle:r.enum(["DAILY","WEEKLY","MONTHLY","YEARLY"]),customerVisible:r.boolean(),popular:r.boolean()}),k=()=>{var r;const k=null==(r=e().state)?void 0:r.record,{createPlan:L,updatePlan:E}=y(),S=n({resolver:i(Y),defaultValues:k||{name:"",pricePerSms:0,billingCycle:"MONTHLY",customerVisible:!1,popular:!1}}),w=L.isPending||E.isPending;return s.jsxs(g,{children:[s.jsxs(g.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[s.jsx(b,{}),s.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[s.jsx(v,{}),s.jsx(C,{})]})]}),s.jsxs(g.Body,{children:[s.jsx("div",{className:"mb-4 flex items-center justify-between space-y-2",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:k?"Edit Plan":"Add New Plan"}),s.jsx("p",{className:"text-muted-foreground",children:k?"Update the plan details below":"Fill in the form below to create a new plan"})]})}),s.jsx(a,{...S,children:s.jsxs("form",{onSubmit:S.handleSubmit((e=>{const s={...e};k?E.mutate({id:k.id,data:{...s,id:k.id}}):L.mutate({data:s})})),children:[s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(t,{control:S.control,name:"name",render:({field:e})=>s.jsxs(o,{children:[s.jsx(c,{children:"Plan Name"}),s.jsx(d,{children:s.jsx(f,{placeholder:"Enter plan name",...e})}),s.jsx(m,{})]})}),s.jsx(t,{control:S.control,name:"pricePerSms",render:({field:e})=>s.jsxs(o,{children:[s.jsx(c,{children:"Price"}),s.jsx(d,{children:s.jsx(f,{type:"number",placeholder:"Enter price",...e,onChange:s=>e.onChange(parseFloat(s.target.value))})}),s.jsx(m,{})]})}),s.jsx(t,{control:S.control,name:"billingCycle",render:({field:e})=>s.jsxs(o,{children:[s.jsx(c,{children:"Billing Cycle"}),s.jsx(d,{children:s.jsxs(j,{value:e.value,onValueChange:e.onChange,children:[s.jsx(x,{children:s.jsx(h,{placeholder:"Select billing cycle"})}),s.jsxs(p,{children:[s.jsx(u,{value:"DAILY",children:"Daily"}),s.jsx(u,{value:"WEEKLY",children:"Weekly"}),s.jsx(u,{value:"MONTHLY",children:"Monthly"}),s.jsx(u,{value:"YEARLY",children:"Yearly"})]})]})}),s.jsx(m,{})]})}),s.jsx(t,{control:S.control,name:"customerVisible",render:({field:e})=>s.jsxs(o,{className:"flex items-center space-x-2",children:[s.jsx(d,{children:s.jsx(N,{checked:e.value,onCheckedChange:e.onChange})}),s.jsx(c,{children:"Customer Visible"}),(null==k?void 0:k.customerVisible)&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot change visibility of existing plans"})]})}),s.jsx(t,{control:S.control,name:"popular",render:({field:e})=>s.jsxs(o,{className:"flex items-center space-x-2",children:[s.jsx(d,{children:s.jsx(N,{checked:e.value,onCheckedChange:e.onChange})}),s.jsx(c,{children:"Mark as Popular Plan"})]})})]})}),s.jsx("div",{className:"mt-6",children:s.jsxs(l,{type:"submit",className:"",loading:w,disabled:w,children:[k?"Update Plan":"Create Plan",s.jsx(P,{className:"ml-2 h-4 w-4"})]})})]})})]})]})};export{k as default};
