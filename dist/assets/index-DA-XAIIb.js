import{j as e,B as s,c as a,l as t,r as n,y as l}from"./index-DgsANLC3.js";import{D as r,f as i,b as c,c as o,d,g as m,u as x,a as u,e as h,m as p,L as j}from"./use-auth-store-DlB6JPqf.js";import{u as g,S as v,T as f,U as w}from"./user-nav-BjY9odv6.js";import{u as N,T as C,a as S,b,c as y,f as I,d as P,e as k,g as V,h as R,i as A,j as E,k as F,l as z}from"./table-DgNG9M6V.js";import{D as M,C as D,d as H,e as T,M as K,P as O,n as B,F as Y,f as q,A as G,g as L,h as U,E as J,i as Z}from"./index-8bOQzAwE.js";import{S as $,a as W,b as _,c as X,d as Q}from"./select-B9KeDb6u.js";import{I as ee}from"./input-BaSBk-Gd.js";import{B as se}from"./badge-DkFHinrL.js";import{P as ae,a as te,b as ne,C as le,c as re,d as ie,e as ce,f as oe,g as de,h as me}from"./popover-BfTfSh0J.js";import{S as xe}from"./separator-E74WL0Px.js";import{I as ue}from"./IconPlus-CVwxeCme.js";import{C as he}from"./checkbox-CDTCacFG.js";import{z as pe}from"./index-B0zZW6rS.js";import{D as je}from"./delete-C1XC-tCI.js";import{D as ge,a as ve,b as fe,c as we,d as Ne}from"./dialog-Cxh4_yU0.js";import{L as Ce}from"./label-BTdkY-TR.js";import{T as Se}from"./textarea-B6_lc-Cl.js";import{u as be}from"./senderid-hook-C-6nlg8_.js";import{s as ye}from"./senderid.services-ChtNoxr4.js";import"./index-D_xSc7Or.js";import"./index-ccUYw2Nl.js";import"./Combination-BCJfLLTG.js";import"./index-ByCmscx5.js";import"./index-BuCM2Ckj.js";import"./index-BQ1RgSiI.js";import"./instance-SAW19xTi.js";import"./index-DCG-2Pmh.js";import"./index-BEsgrMAU.js";import"./extends-DPdBf6DS.js";import"./useMutation-Bxa_RUaj.js";function Ie({table:a}){return e.jsxs("div",{className:"flex items-center justify-between overflow-auto px-2",children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[a.getFilteredSelectedRowModel().rows.length," of"," ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs($,{value:`${a.getState().pagination.pageSize}`,onValueChange:e=>{a.setPageSize(Number(e))},children:[e.jsx(W,{className:"h-8 w-[70px]",children:e.jsx(_,{placeholder:a.getState().pagination.pageSize})}),e.jsx(X,{side:"top",children:[10,20,30,40,50].map((s=>e.jsx(Q,{value:`${s}`,children:s},s)))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," of"," ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(s,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(M,{className:"h-4 w-4"})]}),e.jsxs(s,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(D,{className:"h-4 w-4"})]}),e.jsxs(s,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(H,{className:"h-4 w-4"})]}),e.jsxs(s,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(T,{className:"h-4 w-4"})]})]})]})]})}function Pe({table:a}){return e.jsxs(r,{children:[e.jsx(i,{asChild:!0,children:e.jsxs(s,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(c,{align:"end",className:"w-[150px]",children:[e.jsx(o,{children:"Toggle columns"}),e.jsx(d,{}),a.getAllColumns().filter((e=>void 0!==e.accessorFn&&e.getCanHide())).map((s=>e.jsx(m,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:e=>s.toggleVisibility(!!e),children:s.id},s.id)))]})]})}function ke({column:t,title:n,options:l}){const r=null==t?void 0:t.getFacetedUniqueValues(),i=new Set(null==t?void 0:t.getFilterValue());return e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsxs(s,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),n,(null==i?void 0:i.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(se,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:i.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:i.size>2?e.jsxs(se,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[i.size," selected"]}):l.filter((e=>i.has(e.value))).map((s=>e.jsx(se,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:s.label},s.value)))})]})]})}),e.jsx(ne,{className:"w-[200px] p-0",align:"start",children:e.jsxs(le,{children:[e.jsx(re,{placeholder:n}),e.jsxs(ie,{children:[e.jsx(ce,{children:"No results found."}),e.jsx(oe,{children:l.map((s=>{const n=i.has(s.value);return e.jsxs(de,{onSelect:()=>{n?i.delete(s.value):i.add(s.value);const e=Array.from(i);null==t||t.setFilterValue(e.length?e:void 0)},children:[e.jsx("div",{className:a("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(B,{className:a("h-4 w-4")})}),s.icon&&e.jsx(s.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.label}),(null==r?void 0:r.get(s.value))&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:r.get(s.value)})]},s.value)}))}),i.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsx(oe,{children:e.jsx(de,{onSelect:()=>null==t?void 0:t.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function Ve({table:a}){var n;const l=a.getState().columnFilters.length>0,r=t(),{user:i}=x();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(ee,{placeholder:"Filter Sender Ids...",value:(null==(n=a.getColumn("name"))?void 0:n.getFilterValue())??"",onChange:e=>{var s;return null==(s=a.getColumn("name"))?void 0:s.setFilterValue(e.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsxs("div",{className:"flex gap-x-2",children:[a.getColumn("status")&&e.jsx(ke,{column:a.getColumn("status"),title:"Status",options:[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"}]}),(null==i?void 0:i.customer)&&e.jsxs(s,{variant:"default",onClick:()=>r("/sender-ids/add"),className:"h-8 px-2 lg:px-3",children:["Create New Sender ID",e.jsx(ue,{className:"ml-2 h-4 w-4"})]}),e.jsxs(s,{variant:"default",className:"h-8 px-2 lg:px-3",children:["Export",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]}),l&&e.jsxs(s,{variant:"ghost",onClick:()=>a.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(q,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(Pe,{table:a})]})}function Re({columns:s,data:a,pagination:t,onPaginationChange:l,totalElements:r}){var i;const[c,o]=n.useState({}),[d,m]=n.useState({}),[x,u]=n.useState([]),[h,p]=n.useState([]),j=N({data:a,columns:s,state:{sorting:h,columnVisibility:d,rowSelection:c,columnFilters:x,pagination:t},manualPagination:!0,pageCount:Math.ceil(r/t.pageSize),onPaginationChange:e=>{const s="function"==typeof e?e(t):e;l(s)},enableRowSelection:!0,onRowSelectionChange:o,onSortingChange:p,onColumnFiltersChange:u,onColumnVisibilityChange:m,getCoreRowModel:z(),getFilteredRowModel:F(),getPaginationRowModel:E(),getSortedRowModel:A(),getFacetedRowModel:R(),getFacetedUniqueValues:V()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ve,{table:j}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(C,{children:[e.jsx(S,{children:j.getHeaderGroups().map((s=>e.jsx(b,{children:s.headers.map((s=>e.jsx(y,{colSpan:s.colSpan,children:s.isPlaceholder?null:I(s.column.columnDef.header,s.getContext())},s.id)))},s.id)))}),e.jsx(P,{children:(null==(i=j.getRowModel().rows)?void 0:i.length)?j.getRowModel().rows.map((s=>e.jsx(b,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map((s=>e.jsx(k,{children:I(s.column.columnDef.cell,s.getContext())},s.id)))},s.id))):e.jsx(b,{children:e.jsx(k,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(Ie,{table:j})]})}function Ae({column:t,title:n,className:l}){return t.getCanSort()?e.jsx("div",{className:a("flex items-center space-x-2",l),children:e.jsxs(r,{children:[e.jsx(u,{asChild:!0,children:e.jsxs(s,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:n}),"desc"===t.getIsSorted()?e.jsx(G,{className:"ml-2 h-4 w-4"}):"asc"===t.getIsSorted()?e.jsx(L,{className:"ml-2 h-4 w-4"}):e.jsx(U,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(c,{align:"start",children:[e.jsxs(h,{onClick:()=>t.toggleSorting(!1),children:[e.jsx(L,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(h,{onClick:()=>t.toggleSorting(!0),children:[e.jsx(G,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.jsx(d,{}),e.jsxs(h,{onClick:()=>t.toggleVisibility(!1),children:[e.jsx(J,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):e.jsx("div",{className:a(l),children:n})}function Ee(){const e=["enum","(((.+)+)+)+$","any","1684335KtBVWc","boolean","YEARLY","556134KoSPxa","736603IjxpoP","84776IvGrpZ","1643fvgeAV","constructor","198Zckfis","YCUoe","10109eZkemO","toString","1204loXHFA","1040kVBapJ","478xYpwVH","CUSTOM","number","DAILY","102BriUCs","WEEKLY","search","string","object"];return(Ee=function(){return e})()}const Fe=Me;!function(){const e=Me,s=Ee();for(;;)try{if(196836===-parseInt(e(240))/1*(-parseInt(e(248))/2)+parseInt(e(252))/3*(parseInt(e(246))/4)+-parseInt(e(260))/5+-parseInt(e(237))/6+-parseInt(e(238))/7+parseInt(e(239))/8*(parseInt(e(242))/9)+-parseInt(e(247))/10*(-parseInt(e(244))/11))break;s.push(s.shift())}catch(a){s.push(s.shift())}}();const ze=function(){let e=!0;return function(s,a){const t=e?function(){if(a){const e=a.apply(s,arguments);return a=null,e}}:function(){};return e=!1,t}}()(void 0,(function(){const e=Me,s={YCUoe:e(258)};return ze[e(245)]()[e(254)](s[e(243)])[e(245)]()[e(241)](ze)[e(254)](s[e(243)])}));function Me(e,s){const a=Ee();return(Me=function(e,s){return a[e-=235]})(e,s)}ze();const De=pe[Fe(256)]({id:pe[Fe(250)](),senderId:pe[Fe(255)](),price:pe[Fe(250)](),billingCycle:pe[Fe(257)]([Fe(251),Fe(253),"MONTHLY",Fe(236),Fe(249)]),status:pe[Fe(235)](),approvalStatus:pe[Fe(255)](),createdAt:pe[Fe(255)](),updatedAt:pe.string(),activated:pe[Fe(259)](),customer:pe.any(),user:pe.any()}),He=({senderId:a,actionType:t,onClose:r})=>{const[i,c]=n.useState(""),{approveSenderId:o}=be();return e.jsx(ge,{open:!0,onOpenChange:r,children:e.jsxs(ve,{children:[e.jsxs(fe,{children:[e.jsx(we,{children:"Senderr Id Approval"}),e.jsx(Ne,{children:"APPROVE"===t?"Are you sure you want to approve this sender name?":"Are you sure you want to reject this sender name? This action is irreversible."})]}),e.jsx("div",{className:"space-y-4 py-4",children:"REJECT"===t&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{htmlFor:"remarks",children:"Remarks"}),e.jsx(Se,{id:"remarks",placeholder:"Enter remarks",value:i,onChange:e=>c(e.target.value),required:!0})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(s,{variant:"secondary",onClick:r,children:"Cancel"}),e.jsx(s,{variant:"APPROVE"===t?"default":"destructive",loading:o.isPending,onClick:async()=>{if("REJECT"===t&&!i.trim())return void l.error("Remarks are required for rejection.");const e="APPROVE"===t;o.mutate({data:{id:a,remarks:"remarks",approved:e}},{onSuccess:()=>{l.success(e?"Sender Id approved successfully!":"Sender Id rejected successfully!"),r()},onError:e=>{var s,a;const t=(null==(a=null==(s=null==e?void 0:e.response)?void 0:s.data)?void 0:a.message)||"Failed to process the request.";l.error(t)}})},disabled:o.isPending,children:"APPROVE"===t?"Approve":"Reject"})]})]})})};function Te({row:a}){const l=De.parse(a.original),[i,o]=n.useState(!1),m=De.parse(a.original).senderId,[j,g]=n.useState(!1),[v,f]=n.useState(!1),w=t(),{user:N}=x();return e.jsxs(r,{children:[e.jsx(u,{asChild:!0,children:e.jsxs(s,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(c,{align:"end",className:"w-[160px]",children:[e.jsx(h,{onClick:()=>{w(`/sender-ids/details/${l.id}`)},children:"View"}),!(null==N?void 0:N.customer)&&e.jsxs(e.Fragment,{children:[e.jsx(h,{onClick:()=>g(!0),children:"Approve"}),e.jsx(h,{onClick:()=>f(!0),children:"Reject"}),e.jsx(h,{children:"Delete"})]}),e.jsx(d,{}),(null==N?void 0:N.customer)&&e.jsxs(h,{onClick:()=>{o(!0)},children:["Delete",e.jsx(p,{children:"⌘⌫"})]})]}),i&&e.jsx(je,{id:l.id,name:m,onClose:()=>o(!1)}),j&&e.jsx(He,{senderId:null==l?void 0:l.id,actionType:"APPROVE",onClose:()=>{g(!1)}}),v&&e.jsx(He,{senderId:null==l?void 0:l.id,actionType:"REJECT",onClose:()=>{f(!1)}})]})}const Ke=[{id:"select",header:({table:s})=>e.jsx(he,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>s.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(he,{checked:s.getIsSelected(),onCheckedChange:e=>s.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:s})=>e.jsx(Ae,{column:s,title:"#"}),cell:({row:s})=>e.jsx("div",{className:"w-[80px]",children:s.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"senderId",header:({column:s})=>e.jsx(Ae,{column:s,title:"Sender Id"}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("span",{className:"max-w-32 truncate font-medium sm:max-w-72 md:max-w-[31rem]",children:s.getValue("senderId")})}),enableSorting:!0,enableHiding:!1},{accessorKey:"billingCycle",header:({column:s})=>e.jsx(Ae,{column:s,title:"Billing Cycle"}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("span",{className:"max-w-32 truncate font-medium sm:max-w-72 md:max-w-[31rem]",children:s.getValue("billingCycle")})}),enableSorting:!0,enableHiding:!0},{accessorKey:"price",header:({column:s})=>e.jsx(Ae,{column:s,title:"  Price"}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("span",{className:"max-w-32 truncate font-medium sm:max-w-72 md:max-w-[31rem]",children:s.getValue("price")})}),enableSorting:!0,enableHiding:!1},{accessorKey:"approvalStatus",header:({column:s})=>e.jsx(Ae,{column:s,title:"Approval"}),cell:({row:s})=>e.jsx(se,{variant:"PENDING"===s.getValue("approvalStatus")||null===s.getValue("approvalStatus")?"secondary":"APPROVED"===s.getValue("approvalStatus")?"success":"destructive",children:s.getValue("approvalStatus")})},{accessorKey:"activated",header:({column:s})=>e.jsx(Ae,{column:s,title:"Status"}),cell:({row:s})=>{const a=s.getValue("activated");return e.jsx("div",{className:"flex w-[100px] items-center",children:e.jsx(se,{variant:a?"success":"destructive",children:a?"Active":"Inactive"})})}},{id:"actions",cell:({row:s})=>e.jsx(Te,{row:s})}];function Oe(){const[s,a]=n.useState({pageIndex:0,pageSize:10}),{user:t}=x(),{data:l,isLoading:r}=g({queryKey:["sender-ids",s.pageIndex,s.pageSize],queryFn:async()=>{if(null==t?void 0:t.customer){const e=await ye.getCustomerSenderIds({page:s.pageIndex,size:s.pageSize});return e||{content:e.content||[],totalElements:null==e?void 0:e.totalElements}}const e=await ye.getSenderIds({page:s.pageIndex,size:s.pageSize});return e||{content:e.content||[],totalElements:null==e?void 0:e.totalElements}},retry:2,staleTime:3e5});return e.jsxs(j,{children:[e.jsxs(j.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[e.jsx(v,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(f,{}),e.jsx(w,{})]})]}),e.jsxs(j.Body,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Sender Ids"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's a list of your Sender Ids"})]})}),r?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(Re,{data:null==l?void 0:l.content,columns:Ke,pagination:s,onPaginationChange:a,totalElements:(null==l?void 0:l.totalElements)||0})})]})]})}export{Oe as default};
