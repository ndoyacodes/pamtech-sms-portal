import{r as e,j as o,e as r}from"./index-DgsANLC3.js";import{c as t,a as n,u as s,o as a}from"./index-8bOQzAwE.js";import{c as u,u as c}from"./index-ccUYw2Nl.js";import{u as i}from"./index-ByCmscx5.js";import{P as l}from"./index-D_xSc7Or.js";var f="rovingFocusGroup.onEntryFocus",d={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[v,m,b]=u(p),[w,g]=t(p,[b]),[F,I]=w(p),x=e.forwardRef(((e,r)=>o.jsx(v.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(v.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(R,{...e,ref:r})})})));x.displayName=p;var R=e.forwardRef(((t,u)=>{const{__scopeRovingFocusGroup:i,orientation:p,loop:v=!1,dir:b,currentTabStopId:w,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:I,onEntryFocus:x,preventScrollOnEntryFocus:R=!1,...h}=t,y=e.useRef(null),A=r(u,y),j=c(b),[T=null,E]=s({prop:w,defaultProp:g,onChange:I}),[D,C]=e.useState(!1),_=a(x),k=m(i),G=e.useRef(!1),[K,L]=e.useState(0);return e.useEffect((()=>{const e=y.current;if(e)return e.addEventListener(f,_),()=>e.removeEventListener(f,_)}),[_]),o.jsx(F,{scope:i,orientation:p,dir:j,loop:v,currentTabStopId:T,onItemFocus:e.useCallback((e=>E(e)),[E]),onItemShiftTab:e.useCallback((()=>C(!0)),[]),onFocusableItemAdd:e.useCallback((()=>L((e=>e+1))),[]),onFocusableItemRemove:e.useCallback((()=>L((e=>e-1))),[]),children:o.jsx(l.div,{tabIndex:D||0===K?-1:0,"data-orientation":p,...h,ref:A,style:{outline:"none",...t.style},onMouseDown:n(t.onMouseDown,(()=>{G.current=!0})),onFocus:n(t.onFocus,(e=>{const o=!G.current;if(e.target===e.currentTarget&&o&&!D){const o=new CustomEvent(f,d);if(e.currentTarget.dispatchEvent(o),!o.defaultPrevented){const e=k().filter((e=>e.focusable));S([e.find((e=>e.active)),e.find((e=>e.id===T)),...e].filter(Boolean).map((e=>e.ref.current)),R)}}G.current=!1})),onBlur:n(t.onBlur,(()=>C(!1)))})})})),h="RovingFocusGroupItem",y=e.forwardRef(((r,t)=>{const{__scopeRovingFocusGroup:s,focusable:a=!0,active:u=!1,tabStopId:c,...f}=r,d=i(),p=c||d,b=I(h,s),w=b.currentTabStopId===p,g=m(s),{onFocusableItemAdd:F,onFocusableItemRemove:x}=b;return e.useEffect((()=>{if(a)return F(),()=>x()}),[a,F,x]),o.jsx(v.ItemSlot,{scope:s,id:p,focusable:a,active:u,children:o.jsx(l.span,{tabIndex:w?0:-1,"data-orientation":b.orientation,...f,ref:t,onMouseDown:n(r.onMouseDown,(e=>{a?b.onItemFocus(p):e.preventDefault()})),onFocus:n(r.onFocus,(()=>b.onItemFocus(p))),onKeyDown:n(r.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void b.onItemShiftTab();if(e.target!==e.currentTarget)return;const o=function(e,o,r){const t=function(e,o){return"rtl"!==o?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===o&&["ArrowLeft","ArrowRight"].includes(t)||"horizontal"===o&&["ArrowUp","ArrowDown"].includes(t)?void 0:A[t]}(e,b.orientation,b.dir);if(void 0!==o){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=g().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===o)n.reverse();else if("prev"===o||"next"===o){"prev"===o&&n.reverse();const s=n.indexOf(e.currentTarget);n=b.loop?(t=s+1,(r=n).map(((e,o)=>r[(t+o)%r.length]))):n.slice(s+1)}setTimeout((()=>S(n)))}var r,t}))})})}));y.displayName=h;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function S(e,o=!1){const r=document.activeElement;for(const t of e){if(t===r)return;if(t.focus({preventScroll:o}),document.activeElement!==r)return}}var j=x,T=y;export{T as I,j as R,g as c};
