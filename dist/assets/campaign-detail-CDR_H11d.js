import{k as D,f as S,r as p,j as e,B as w,m as h}from"./index-d9TgJTTy.js";import{L as c}from"./use-auth-store-CiawQdvf.js";import{B as j}from"./badge-DjWKEn-0.js";import{u as g,S as T,T as M,U as E}from"./user-nav-1-09pvFT.js";import{T as A,a as C,b as n,d}from"./tabs-DtrY1U19.js";import{c as I}from"./campaign.service-cFIIIhqk.js";import{D as L,c as k}from"./columns-DWbSTraL.js";import{m as B}from"./message.service-D7RZzy-l.js";import{f as u}from"./format-OUeO2N_p.js";import"./index-CD610jSn.js";import"./index-Chc_HW3c.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./input-DpwfBUf3.js";import"./instance-BGpPafi2.js";import"./table-DaUOpY8m.js";import"./select-cMMktxW9.js";import"./index-W6PM2pC6.js";import"./index-BCvMni3w.js";import"./index-C3hmKdn7.js";import"./index.esm-B6ab4Cq_.js";import"./zod-CLsu2KRF.js";import"./form-DxQsSBla.js";import"./label-BkzUlrRU.js";import"./senderid.services-oF-ok74q.js";import"./checkbox-BGteumho.js";const oe=()=>{var x;const N=D(),s=(x=S().state)==null?void 0:x.campaign,{data:l}=g({queryKey:["campaign-logs",s==null?void 0:s.id],queryFn:async()=>await I.getCampaignLogsById(s==null?void 0:s.id)||[],retry:2,staleTime:5*60*1e3}),[t,m]=p.useState({pageIndex:0,pageSize:10}),[o,y]=p.useState({filters:[{key:"campaign.id",operator:"EQUAL",field_type:"STRING",value:s.id,values:[s.id]}],sorts:[{key:"id",direction:"DESC"}],page:0,size:10}),{data:r,isLoading:v,refetch:f}=g({queryKey:["all-sms",t.pageIndex,t.pageSize,o],queryFn:async()=>{const a={...o,page:t.pageIndex,size:t.pageSize},i=await B.getMessages({...a});return i||{content:i.content||[],totalElements:i==null?void 0:i.totalElements}},retry:2,staleTime:5*60*1e3}),b=a=>(y(a),m({pageIndex:0,pageSize:t.pageSize}),f());return e.jsxs(c,{children:[e.jsxs(c.Header,{sticky:!0,className:"mt-4 sm:mt-4 md:mt-0 lg:mt-0",children:[e.jsx(T,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(M,{}),e.jsx(E,{})]})]}),e.jsxs(c.Body,{children:[e.jsx("div",{className:"ml-auto flex items-center space-x-4",children:e.jsx(w,{onClick:()=>N("/automations"),children:"Back to Automations"})}),e.jsxs(A,{orientation:"vertical",defaultValue:"campaign-details",className:"space-y-4",children:[e.jsx("div",{className:"mt-3 w-full overflow-x-auto pb-2",children:e.jsxs(C,{children:[e.jsx(n,{value:"campaign-details",children:"Campaign Details"}),e.jsx(n,{value:"messages",children:"Messages"}),e.jsx(n,{value:"logs",children:"Campaign history"})]})}),e.jsx(d,{value:"campaign-details",className:"space-y-4 ",children:e.jsxs("div",{className:" ",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold",children:s.name}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:["45",e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-lg",children:s.description||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx(j,{variant:s.active?"success":"destructive",children:s.active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Schedule"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Start Date"}),e.jsx("p",{className:"text-lg",children:(s==null?void 0:s.startDate)&&u(new Date(s.startDate),"yyyy-MM-dd")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"End Date"}),e.jsx("p",{className:"text-lg",children:(s==null?void 0:s.endDate)&&u(new Date(s.endDate),"yyyy-MM-dd")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Recurring Period"}),e.jsx("p",{className:"text-lg",children:s.recurringPeriod||"N/A"})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Sender and Message"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sender"}),e.jsx("p",{className:"text-lg",children:s.sender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Message Template"}),e.jsx("p",{className:"text-lg",children:s.messageTemplate||"N/A"})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Next Run"}),e.jsx("p",{className:"text-lg",children:s.nextRun?h(s.nextRun).format("yyyy-MM-DD HH:mm:ss"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Recurring"}),e.jsx("p",{className:"text-lg",children:s.recurring?"Yes":"No"})]})]})]})]})]})}),e.jsxs(d,{value:"messages",className:"space-y-4",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold",children:"Sms Log"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(L,{data:r==null?void 0:r.content,columns:k,pagination:t,onPaginationChange:m,totalElements:(r==null?void 0:r.totalElements)||0,onFilterSubmit:b})})]}),e.jsxs(d,{value:"logs",className:"space-y-4",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold",children:"Campaign History"}),e.jsx("div",{className:"overflow-x-auto",children:v?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):(l==null?void 0:l.length)===0?e.jsx("p",{className:"text-lg text-gray-500",children:"No logs available"}):e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Run Description"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Status"})]})}),e.jsx("tbody",{children:l.map(a=>(console.log(a),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:h(a.createdAt).format("yyyy-MM-DD HH:mm:ss")}),e.jsx("td",{className:"px-4 py-2",children:a.runDescription}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(j,{variant:a.status==="COMPLETED"?"success":"destructive",children:a.status})})]},a.id)))})]})})]})]})]})]})};export{oe as default};
