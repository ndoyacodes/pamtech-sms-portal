import{r as e,u as s,j as l,B as a}from"./index-DgsANLC3.js";import{u as n,S as t,T as i,U as o}from"./user-nav-BjY9odv6.js";import{L as r}from"./use-auth-store-DlB6JPqf.js";import{C as d,a as c,b as m,c as x}from"./card-Cxkzk52A.js";import{B as h}from"./badge-DkFHinrL.js";import{c as u}from"./contacts.service-CB5R8qdu.js";import{T as p,a as j,b as v,d as N}from"./tabs-DS2VtIrA.js";import{D as g,e as b,a as f,b as y,c as k}from"./dialog-Cxh4_yU0.js";import{I as w}from"./input-BaSBk-Gd.js";import{L as C}from"./label-BTdkY-TR.js";import{u as P}from"./index.esm-3KLEzfMo.js";import{u as S}from"./phonebook-hoook-D6RoXJx9.js";import{a as B,D as A,b as I}from"./delete-dialog-D2RPb3zb.js";import{C as E}from"./checkbox-CDTCacFG.js";import{C as V}from"./circle-alert-CdSH3Dv5.js";import{c as z}from"./createLucideIcon-DHucisN1.js";import{B as D}from"./building-BtDL_AIe.js";import{G as K}from"./globe-Cdvf1KkP.js";import{U as q}from"./user-DO7yJkip.js";import{C as F}from"./calendar-C0l8uDaX.js";import{f as M}from"./format-2Kviky6Q.js";import"./index-8bOQzAwE.js";import"./index-D_xSc7Or.js";import"./instance-SAW19xTi.js";import"./index-ccUYw2Nl.js";import"./Combination-BCJfLLTG.js";import"./index-ByCmscx5.js";import"./index-BuCM2Ckj.js";import"./index-BQ1RgSiI.js";import"./useMutation-Bxa_RUaj.js";import"./table-DgNG9M6V.js";import"./select-B9KeDb6u.js";import"./index-DCG-2Pmh.js";import"./index-BEsgrMAU.js";import"./popover-BfTfSh0J.js";import"./extends-DPdBf6DS.js";import"./separator-E74WL0Px.js";
/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=z("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);function L(){const[n,t]=e.useState(!1),{id:i}=s(),{addContactToPhonebook:o}=S(),{register:r,handleSubmit:d,reset:c}=P();return l.jsxs(g,{open:n,onOpenChange:t,children:[l.jsx(b,{asChild:!0,children:l.jsx(a,{variant:"default",children:"Add Phone Number"})}),l.jsxs(f,{className:"sm:max-w-[425px]",children:[l.jsx(y,{children:l.jsx(k,{children:"Add Phone Number"})}),l.jsxs("form",{onSubmit:d((async e=>{try{const s={recipient:e.recipient,phoneBook:parseInt(i)};await o.mutate({data:s}),t(!1),c()}catch(s){}})),className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(C,{htmlFor:"recipient",children:"Phone Number"}),l.jsx(w,{id:"recipient",placeholder:"Enter phone number",...r("recipient",{required:!0})})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(C,{htmlFor:"recipient",children:"Name"}),l.jsx(w,{id:"name",placeholder:"Enter phone name",...r("name",{required:!1})})]}),l.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[l.jsx(a,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"}),l.jsx(a,{type:"submit",disabled:o.isPending,children:o.isPending?"Adding...":"Add Phone Number"})]})]})]})]})}const H=[{id:"select",header:({table:e})=>l.jsx(E,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>l.jsx(E,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:e})=>l.jsx(B,{column:e,title:"#"}),cell:({row:e})=>l.jsx("div",{className:"w-[80px]",children:e.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"msisdn",header:({column:e})=>l.jsx(B,{column:e,title:"Number"}),cell:({row:e})=>l.jsx("div",{className:"max-w-[200px] truncate",children:e.getValue("msisdn")})},{accessorKey:"col1",header:({column:e})=>l.jsx(B,{column:e,title:"Column B"}),cell:({row:e})=>l.jsx("div",{className:"max-w-[200px] truncate",children:e.getValue("col1")})},{accessorKey:"col2",header:({column:e})=>l.jsx(B,{column:e,title:"Column C"}),cell:({row:e})=>l.jsx("div",{className:"max-w-[200px] truncate",children:e.getValue("col2")})},{accessorKey:"col3",header:({column:e})=>l.jsx(B,{column:e,title:"Column D"}),cell:({row:e})=>l.jsx("div",{className:"max-w-[200px] truncate",children:e.getValue("col3")})},{accessorKey:"col4",header:({column:e})=>l.jsx(B,{column:e,title:"Column E"}),cell:({row:e})=>l.jsx("div",{className:"max-w-[200px] truncate",children:e.getValue("col4")})},{accessorKey:"col5",header:({column:e})=>l.jsx(B,{column:e,title:"Column F"}),cell:({row:e})=>l.jsx("div",{className:"max-w-[200px] truncate",children:e.getValue("col5")})},{accessorKey:"msisdn",header:({column:e})=>l.jsx(B,{column:e,title:"Action"}),cell:({row:s})=>{const[n,t]=e.useState(!1);return l.jsxs("div",{className:" truncate",children:[l.jsx(a,{onClick:()=>t(!0),size:"sm",variant:"destructive",children:"Delete"}),n&&l.jsx(A,{id:s.getValue("id"),name:s.getValue("msisdn"),onClose:()=>t(!1),type:"number"})]})}}],U=()=>{var a,g,b,f,y,k,w,C,P,S,B,A,E,z,U,$,R,O,G,J,W,Z,_,Q,X;const{id:Y}=s(),[ee,se]=e.useState({pageIndex:0,pageSize:10}),{data:le,isLoading:ae,error:ne}=n({queryKey:["phonebook",Y,ee.pageIndex,ee.pageSize],queryFn:async()=>{if(!Y)throw new Error("ID is required");const e=await u.getPhoneBookById(Y),s=await u.getPhoneBookNUmbers(Y,{page:ee.pageIndex,size:ee.pageSize});return{phonebook:e,numbers:s||{content:s.content||[],totalElements:null==s?void 0:s.totalElements}}},enabled:!!Y});return ae?l.jsx(r,{children:l.jsx(r.Body,{children:l.jsx("div",{className:"mx-auto max-w-6xl p-6",children:l.jsx("div",{className:"flex h-64 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})})})})}):ne?l.jsx(r,{children:l.jsx(r.Body,{children:l.jsx(d,{className:"mx-auto max-w-6xl p-6",children:l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-destructive",children:[l.jsx(V,{size:20}),l.jsx("p",{children:"Error loading phonebook details"})]})})})}):l.jsxs(r,{children:[l.jsxs(r.Header,{sticky:!0,className:"mt-4 sm:mt-4 md:mt-0 lg:mt-0",children:[l.jsx(t,{}),l.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[l.jsx(i,{}),l.jsx(o,{})]})]}),l.jsx(r.Body,{children:l.jsxs(p,{orientation:"vertical",defaultValue:"numbers",className:"space-y-4",children:[l.jsx("div",{className:"mt-3 w-full overflow-x-auto pb-2",children:l.jsxs(j,{children:[l.jsx(v,{value:"numbers",children:"Phone book numbers"}),l.jsx(v,{value:"phonebook-details",children:"Phone book details"})]})}),l.jsx(N,{value:"phonebook-details",className:"space-y-4 ",children:l.jsxs("div",{className:"space-y-6 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:null==(a=null==le?void 0:le.phonebook)?void 0:a.name}),l.jsx("p",{className:"text-muted-foreground",children:null==(g=null==le?void 0:le.phonebook)?void 0:g.description})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(h,{variant:(null==(b=null==le?void 0:le.phonebook)?void 0:b.active)?"default":"secondary",children:(null==(f=null==le?void 0:le.phonebook)?void 0:f.active)?"Active":"Inactive"}),(null==(y=null==le?void 0:le.phonebook)?void 0:y.deleted)&&l.jsx(h,{variant:"destructive",children:"Deleted"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[l.jsxs(d,{children:[l.jsx(c,{children:l.jsxs(m,{className:"flex items-center gap-2",children:[l.jsx(T,{className:"h-5 w-5"}),"Phonebook Information"]})}),l.jsx(x,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact Count"}),l.jsx("p",{className:"text-lg font-medium",children:null==(k=null==le?void 0:le.phonebook)?void 0:k.count})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"File Name"}),l.jsx("p",{className:"truncate text-sm font-medium",children:null==(C=null==(w=null==le?void 0:le.phonebook)?void 0:w.fileName)?void 0:C.split("/").pop()})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Created At"}),l.jsx("p",{className:"text-sm",children:M(new Date(null==(P=null==le?void 0:le.phonebook)?void 0:P.createdAt),"PPp")})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),l.jsx("p",{className:"text-sm",children:M(new Date(null==(S=null==le?void 0:le.phonebook)?void 0:S.updatedAt),"PPp")})]})]})})]}),l.jsxs(d,{children:[l.jsx(c,{children:l.jsxs(m,{className:"flex items-center gap-2",children:[l.jsx(D,{className:"h-5 w-5"}),"Customer Information"]})}),l.jsx(x,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Company"}),l.jsx("p",{className:"font-medium",children:null==(B=null==le?void 0:le.phonebook)?void 0:B.customer.companyName})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Type"}),l.jsx(h,{variant:"outline",children:null==(A=null==le?void 0:le.phonebook)?void 0:A.customer.customerType})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),l.jsx("p",{className:"text-sm",children:null==(E=null==le?void 0:le.phonebook)?void 0:E.customer.email})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Timezone"}),l.jsx("p",{className:"text-sm",children:null==(z=null==le?void 0:le.phonebook)?void 0:z.customer.timezone})]}),(null==(U=null==le?void 0:le.phonebook)?void 0:U.customer.website)&&l.jsxs("div",{className:"col-span-2",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Website"}),l.jsxs("a",{href:null==($=null==le?void 0:le.phonebook)?void 0:$.customer.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:[l.jsx(K,{className:"h-4 w-4"}),null==(R=null==le?void 0:le.phonebook)?void 0:R.customer.website]})]})]})})]}),l.jsxs(d,{children:[l.jsx(c,{children:l.jsxs(m,{className:"flex items-center gap-2",children:[l.jsx(q,{className:"h-5 w-5"}),"Created By"]})}),l.jsx(x,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),l.jsx("p",{className:"font-medium",children:`${null==(O=null==le?void 0:le.phonebook)?void 0:O.createdBy.firstName} ${null==(G=null==le?void 0:le.phonebook)?void 0:G.createdBy.lastName}`})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),l.jsx("p",{className:"text-sm",children:null==(J=null==le?void 0:le.phonebook)?void 0:J.createdBy.email})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),l.jsx("p",{className:"text-sm",children:null==(W=null==le?void 0:le.phonebook)?void 0:W.createdBy.phoneNumber})]})]})})]}),l.jsxs(d,{children:[l.jsx(c,{children:l.jsxs(m,{className:"flex items-center gap-2",children:[l.jsx(F,{className:"h-5 w-5"}),"Activity Timeline"]})}),l.jsx(x,{className:"space-y-4",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Created"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:M(new Date(null==(Z=null==le?void 0:le.phonebook)?void 0:Z.createdAt),"PPp")})]})}),l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:M(new Date(null==(_=null==le?void 0:le.phonebook)?void 0:_.updatedAt),"PPp")})]})})]})})]})]})]})}),l.jsxs(N,{value:"numbers",className:"space-y-4 ",children:[l.jsxs("div",{className:"my-2 grid grid-cols-1 gap-6 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact Count"}),l.jsx("p",{className:"text-lg font-medium",children:null==(Q=null==le?void 0:le.phonebook)?void 0:Q.count})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Phonebook Name"}),l.jsx("p",{className:"truncate text-sm font-medium",children:null==(X=null==le?void 0:le.phonebook)?void 0:X.name})]})]}),l.jsx(L,{}),ae?l.jsx("div",{className:"flex h-64 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):l.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:l.jsx(I,{data:null==le?void 0:le.numbers.content,columns:H,isIndex:!1,pagination:ee,onPaginationChange:se,totalElements:(null==le?void 0:le.numbers.totalElements)||0})})]})]})})]})};export{U as PhonebookView,U as default};
