import{r as m,k as x,j as e,B as p}from"./index-d9TgJTTy.js";import{D as u,a as g,b as h,e as l,d as j,L as c}from"./use-auth-store-CiawQdvf.js";import{u as f,S as b,T as y,U as v}from"./user-nav-1-09pvFT.js";import{D as w,a as o,b as N}from"./delete-dialog-Ds0KPMum.js";import{B as S}from"./badge-DjWKEn-0.js";import{C as d}from"./checkbox-BGteumho.js";import{i as k}from"./index-CD610jSn.js";import{z as s}from"./index-C3hmKdn7.js";import{c as C}from"./contacts.service-WxEaevo_.js";import"./index-Chc_HW3c.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./input-DpwfBUf3.js";import"./instance-BGpPafi2.js";import"./table-DaUOpY8m.js";import"./select-cMMktxW9.js";import"./index-W6PM2pC6.js";import"./index-BCvMni3w.js";import"./popover-CnlP89lX.js";import"./extends-CF3RwP-h.js";import"./dialog-BlA-gPk4.js";import"./separator-BUjyEJiy.js";import"./useMutation-scFYzLXQ.js";const D=s.object({id:s.number(),name:s.string(),description:s.string(),fileName:s.string(),count:s.number(),deleted:s.boolean(),active:s.boolean(),customer:s.any(),createdBy:s.any(),createdAt:s.string(),updatedAt:s.string()});function I({row:t}){const a=D.parse(t.original),[r,i]=m.useState(!1),n=x();return e.jsxs(u,{children:[e.jsx(g,{asChild:!0,children:e.jsxs(p,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(h,{align:"end",className:"w-[160px]",children:[e.jsx(l,{onClick:()=>{n(`/phonebook/${a.id}`)},children:"View"}),e.jsx(l,{onClick:()=>{n("/upload-phonebook",{state:{record:a}})},children:"Edit"}),e.jsx(j,{}),e.jsx(l,{onClick:()=>{i(!0)},children:"Delete"})]}),r&&e.jsx(w,{id:a==null?void 0:a.id,name:a==null?void 0:a.name,onClose:()=>i(!1),type:"phonebook"})]})}const P=[{id:"select",header:({table:t})=>e.jsx(d,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>t.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:t})=>e.jsx(d,{checked:t.getIsSelected(),onCheckedChange:a=>t.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:t})=>e.jsx(o,{column:t,title:"#"}),cell:({row:t})=>e.jsx("div",{className:"w-[80px]",children:t.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:t})=>e.jsx(o,{column:t,title:"Name"}),cell:({row:t})=>e.jsx("div",{className:"w-[150px]",children:t.getValue("name")})},{accessorKey:"description",header:({column:t})=>e.jsx(o,{column:t,title:"description"}),cell:({row:t})=>e.jsx("div",{className:"w-[100px]",children:t.getValue("description")})},{accessorKey:"count",header:({column:t})=>e.jsx(o,{column:t,title:"Number of contacts"}),cell:({row:t})=>e.jsx("div",{className:"max-w-[200px] truncate",children:t.getValue("count")})},{accessorKey:"active",header:({column:t})=>e.jsx(o,{column:t,title:"Status"}),cell:({row:t})=>{const a=t.getValue("active");return e.jsx("div",{className:"flex w-[100px] items-center",children:e.jsx(S,{variant:a?"default":"destructive",children:a?"Active":"Inactive"})})}},{id:"actions",cell:({row:t})=>e.jsx(I,{row:t})}];function ae(){const[t,a]=m.useState({pageIndex:0,pageSize:10}),{data:r,isLoading:i}=f({queryKey:["phone-books",t.pageIndex,t.pageSize],queryFn:async()=>{const n=await C.getCustomerPhoneBooks({page:t.pageIndex,size:t.pageSize});return n||{content:n.content||[],totalElements:n==null?void 0:n.totalElements}},retry:2,staleTime:5*60*1e3});return console.log(r),e.jsxs(c,{children:[e.jsxs(c.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[e.jsx(b,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(y,{}),e.jsx(v,{})]})]}),e.jsxs(c.Body,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Phone books"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's a list of all your phone books"})]})}),i?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(N,{data:r==null?void 0:r.content,isIndex:!0,columns:P,pagination:t,onPaginationChange:a,totalElements:(r==null?void 0:r.totalElements)||0})})]})]})}export{ae as default};
