import{r as e,e as n}from"./index-DgsANLC3.js";import{b as t}from"./index-8bOQzAwE.js";var r=r=>{const{present:o,children:u}=r,s=function(n){const[r,o]=e.useState(),u=e.useRef({}),s=e.useRef(n),a=e.useRef("none"),c=n?"mounted":"unmounted",[d,l]=function(n,t){return e.useReducer(((e,n)=>t[e][n]??e),n)}(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect((()=>{const e=i(u.current);a.current="mounted"===d?e:"none"}),[d]),t((()=>{const e=u.current,t=s.current;if(t!==n){const r=a.current,o=i(e);if(n)l("MOUNT");else if("none"===o||"none"===(null==e?void 0:e.display))l("UNMOUNT");else{l(t&&r!==o?"ANIMATION_OUT":"UNMOUNT")}s.current=n}}),[n,l]),t((()=>{if(r){let e;const n=r.ownerDocument.defaultView??window,t=t=>{const o=i(u.current).includes(t.animationName);if(t.target===r&&o&&(l("ANIMATION_END"),!s.current)){const t=r.style.animationFillMode;r.style.animationFillMode="forwards",e=n.setTimeout((()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=t)}))}},o=e=>{e.target===r&&(a.current=i(u.current))};return r.addEventListener("animationstart",o),r.addEventListener("animationcancel",t),r.addEventListener("animationend",t),()=>{n.clearTimeout(e),r.removeEventListener("animationstart",o),r.removeEventListener("animationcancel",t),r.removeEventListener("animationend",t)}}l("ANIMATION_END")}),[r,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:e.useCallback((e=>{e&&(u.current=getComputedStyle(e)),o(e)}),[])}}(o),a="function"==typeof u?u({present:s.isPresent}):e.Children.only(u),c=n(s.ref,function(e){var n,t;let r=null==(n=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null==(t=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(a));return"function"==typeof u||s.isPresent?e.cloneElement(a,{ref:c}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}r.displayName="Presence";export{r as P};
