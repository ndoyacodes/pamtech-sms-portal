import{r as e,e as t,j as r,c as s}from"./index-DgsANLC3.js";import{u as a,c as n,a as o,r as c,n as d}from"./index-8bOQzAwE.js";import{u as i}from"./index-DCG-2Pmh.js";import{P as l}from"./index-BuCM2Ckj.js";import{P as u}from"./index-D_xSc7Or.js";var f="Checkbox",[p,m]=n(f),[b,h]=p(f),k=e.forwardRef(((s,n)=>{const{__scopeCheckbox:c,name:d,checked:i,defaultChecked:l,required:f,disabled:p,value:m="on",onCheckedChange:h,form:k,...x}=s,[y,w]=e.useState(null),g=t(n,(e=>w(e))),E=e.useRef(!1),N=!y||(k||!!y.closest("form")),[R=!1,P]=a({prop:i,defaultProp:l,onChange:h}),D=e.useRef(R);return e.useEffect((()=>{const e=null==y?void 0:y.form;if(e){const t=()=>P(D.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[y,P]),r.jsxs(b,{scope:c,state:R,disabled:p,children:[r.jsx(u.button,{type:"button",role:"checkbox","aria-checked":j(R)?"mixed":R,"aria-required":f,"data-state":C(R),"data-disabled":p?"":void 0,disabled:p,value:m,...x,ref:g,onKeyDown:o(s.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:o(s.onClick,(e=>{P((e=>!!j(e)||!e)),N&&(E.current=e.isPropagationStopped(),E.current||e.stopPropagation())}))}),N&&r.jsx(v,{control:y,bubbles:!E.current,name:d,value:m,checked:R,required:f,disabled:p,form:k,style:{transform:"translateX(-100%)"},defaultChecked:!j(l)&&l})]})}));k.displayName=f;var x="CheckboxIndicator",y=e.forwardRef(((e,t)=>{const{__scopeCheckbox:s,forceMount:a,...n}=e,o=h(x,s);return r.jsx(l,{present:a||j(o.state)||!0===o.state,children:r.jsx(u.span,{"data-state":C(o.state),"data-disabled":o.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})}));y.displayName=x;var v=t=>{const{control:s,checked:a,bubbles:n=!0,defaultChecked:o,...d}=t,l=e.useRef(null),u=i(a),f=c(s);e.useEffect((()=>{const e=l.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==a&&r){const t=new Event("click",{bubbles:n});e.indeterminate=j(a),r.call(e,!j(a)&&a),e.dispatchEvent(t)}}),[u,a,n]);const p=e.useRef(!j(a)&&a);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??p.current,...d,tabIndex:-1,ref:l,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return"indeterminate"===e}function C(e){return j(e)?"indeterminate":e?"checked":"unchecked"}var w=k,g=y;const E=e.forwardRef((({className:e,...t},a)=>r.jsx(w,{ref:a,className:s("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(g,{className:s("flex items-center justify-center text-current"),children:r.jsx(d,{className:"h-4 w-4"})})})));E.displayName=w.displayName;export{E as C};
