var pe=t=>{throw TypeError(t)};var X=(t,e,s)=>e.has(t)||pe("Cannot "+s);var r=(t,e,s)=>(X(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?pe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),d=(t,e,s,a)=>(X(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),m=(t,e,s)=>(X(t,e,"access private method"),s);import{q as ze,F as ge,G as I,t as Y,H as G,I as He,J as Z,K as be,M as Ke,N as Ve,P as $e,Q as ve,x as je,r as p,l as Ge,b as Ie,j as o,T as We,B as Ne,c as ce,k as Je}from"./index-d9TgJTTy.js";import{I as Xe}from"./input-DpwfBUf3.js";import{c as Ye,o as Ze,b as Ae}from"./index-CD610jSn.js";import{P as le}from"./index-Chc_HW3c.js";import{u as et,D as tt,a as st,b as rt,c as at,d as ye,n as it,e as $}from"./use-auth-store-CiawQdvf.js";import{s as nt,n as xe,A as ot}from"./instance-BGpPafi2.js";var C,c,H,R,M,F,A,j,K,L,Q,T,D,E,P,l,z,ee,te,se,re,ae,ie,ne,Ee,we,ct=(we=class extends ze{constructor(e,s){super();b(this,l);b(this,C);b(this,c);b(this,H);b(this,R);b(this,M);b(this,F);b(this,A);b(this,j);b(this,K);b(this,L);b(this,Q);b(this,T);b(this,D);b(this,E);b(this,P,new Set);this.options=s,d(this,C,e),d(this,j,null),d(this,A,ge()),this.options.experimental_prefetchInRender||r(this,A).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,c).addObserver(this),Re(r(this,c),this.options)?m(this,l,z).call(this):this.updateResult(),m(this,l,re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oe(r(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oe(r(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,m(this,l,ae).call(this),m(this,l,ie).call(this),r(this,c).removeObserver(this)}setOptions(e,s){const a=this.options,h=r(this,c);if(this.options=r(this,C).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,r(this,c))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");m(this,l,ne).call(this),r(this,c).setOptions(this.options),a._defaulted&&!Y(this.options,a)&&r(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,c),observer:this});const n=this.hasListeners();n&&Ce(r(this,c),h,this.options,a)&&m(this,l,z).call(this),this.updateResult(s),n&&(r(this,c)!==h||I(this.options.enabled,r(this,c))!==I(a.enabled,r(this,c))||G(this.options.staleTime,r(this,c))!==G(a.staleTime,r(this,c)))&&m(this,l,ee).call(this);const i=m(this,l,te).call(this);n&&(r(this,c)!==h||I(this.options.enabled,r(this,c))!==I(a.enabled,r(this,c))||i!==r(this,E))&&m(this,l,se).call(this,i)}getOptimisticResult(e){const s=r(this,C).getQueryCache().build(r(this,C),e),a=this.createResult(s,e);return ht(this,a)&&(d(this,R,a),d(this,F,this.options),d(this,M,r(this,c).state)),a}getCurrentResult(){return r(this,R)}trackResult(e,s){const a={};return Object.keys(e).forEach(h=>{Object.defineProperty(a,h,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(h),s==null||s(h),e[h])})}),a}trackProp(e){r(this,P).add(e)}getCurrentQuery(){return r(this,c)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,C).defaultQueryOptions(e),a=r(this,C).getQueryCache().build(r(this,C),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(e){return m(this,l,z).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,R)))}createResult(e,s){var me;const a=r(this,c),h=this.options,n=r(this,R),i=r(this,M),g=r(this,F),y=e!==a?e.state:r(this,H),{state:N}=e;let u={...N},U=!1,v;if(s._optimisticResults){const x=this.hasListeners(),O=!x&&Re(e,s),k=x&&Ce(e,a,s,h);(O||k)&&(u={...u,...$e(N.data,e.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:_,errorUpdatedAt:B,status:S}=u;if(s.select&&u.data!==void 0)if(n&&u.data===(i==null?void 0:i.data)&&s.select===r(this,K))v=r(this,L);else try{d(this,K,s.select),v=s.select(u.data),v=ve(n==null?void 0:n.data,v,s),d(this,L,v),d(this,j,null)}catch(x){d(this,j,x)}else v=u.data;if(s.placeholderData!==void 0&&v===void 0&&S==="pending"){let x;if(n!=null&&n.isPlaceholderData&&s.placeholderData===(g==null?void 0:g.placeholderData))x=n.data;else if(x=typeof s.placeholderData=="function"?s.placeholderData((me=r(this,Q))==null?void 0:me.state.data,r(this,Q)):s.placeholderData,s.select&&x!==void 0)try{x=s.select(x),d(this,j,null)}catch(O){d(this,j,O)}x!==void 0&&(S="success",v=ve(n==null?void 0:n.data,x,s),U=!0)}r(this,j)&&(_=r(this,j),v=r(this,L),B=Date.now(),S="error");const q=u.fetchStatus==="fetching",W=S==="pending",J=S==="error",de=W&&q,fe=v!==void 0,w={status:S,fetchStatus:u.fetchStatus,isPending:W,isSuccess:S==="success",isError:J,isInitialLoading:de,isLoading:de,data:v,dataUpdatedAt:u.dataUpdatedAt,error:_,errorUpdatedAt:B,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>y.dataUpdateCount||u.errorUpdateCount>y.errorUpdateCount,isFetching:q,isRefetching:q&&!W,isLoadingError:J&&!fe,isPaused:u.fetchStatus==="paused",isPlaceholderData:U,isRefetchError:J&&fe,isStale:he(e,s),refetch:this.refetch,promise:r(this,A)};if(this.options.experimental_prefetchInRender){const x=V=>{w.status==="error"?V.reject(w.error):w.data!==void 0&&V.resolve(w.data)},O=()=>{const V=d(this,A,w.promise=ge());x(V)},k=r(this,A);switch(k.status){case"pending":e.queryHash===a.queryHash&&x(k);break;case"fulfilled":(w.status==="error"||w.data!==k.value)&&O();break;case"rejected":(w.status!=="error"||w.error!==k.reason)&&O();break}}return w}updateResult(e){const s=r(this,R),a=this.createResult(r(this,c),this.options);if(d(this,M,r(this,c).state),d(this,F,this.options),r(this,M).data!==void 0&&d(this,Q,r(this,c)),Y(a,s))return;d(this,R,a);const h={},n=()=>{if(!s)return!0;const{notifyOnChangeProps:i}=this.options,g=typeof i=="function"?i():i;if(g==="all"||!g&&!r(this,P).size)return!0;const f=new Set(g??r(this,P));return this.options.throwOnError&&f.add("error"),Object.keys(r(this,R)).some(y=>{const N=y;return r(this,R)[N]!==s[N]&&f.has(N)})};(e==null?void 0:e.listeners)!==!1&&n()&&(h.listeners=!0),m(this,l,Ee).call(this,{...h,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&m(this,l,re).call(this)}},C=new WeakMap,c=new WeakMap,H=new WeakMap,R=new WeakMap,M=new WeakMap,F=new WeakMap,A=new WeakMap,j=new WeakMap,K=new WeakMap,L=new WeakMap,Q=new WeakMap,T=new WeakMap,D=new WeakMap,E=new WeakMap,P=new WeakMap,l=new WeakSet,z=function(e){m(this,l,ne).call(this);let s=r(this,c).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(He)),s},ee=function(){m(this,l,ae).call(this);const e=G(this.options.staleTime,r(this,c));if(Z||r(this,R).isStale||!be(e))return;const a=Ke(r(this,R).dataUpdatedAt,e)+1;d(this,T,setTimeout(()=>{r(this,R).isStale||this.updateResult()},a))},te=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,c)):this.options.refetchInterval)??!1},se=function(e){m(this,l,ie).call(this),d(this,E,e),!(Z||I(this.options.enabled,r(this,c))===!1||!be(r(this,E))||r(this,E)===0)&&d(this,D,setInterval(()=>{(this.options.refetchIntervalInBackground||Ve.isFocused())&&m(this,l,z).call(this)},r(this,E)))},re=function(){m(this,l,ee).call(this),m(this,l,se).call(this,m(this,l,te).call(this))},ae=function(){r(this,T)&&(clearTimeout(r(this,T)),d(this,T,void 0))},ie=function(){r(this,D)&&(clearInterval(r(this,D)),d(this,D,void 0))},ne=function(){const e=r(this,C).getQueryCache().build(r(this,C),this.options);if(e===r(this,c))return;const s=r(this,c);d(this,c,e),d(this,H,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Ee=function(e){je.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,R))}),r(this,C).getQueryCache().notify({query:r(this,c),type:"observerResultsUpdated"})})},we);function lt(t,e){return I(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Re(t,e){return lt(t,e)||t.state.data!==void 0&&oe(t,e,e.refetchOnMount)}function oe(t,e,s){if(I(e.enabled,t)!==!1){const a=typeof s=="function"?s(t):s;return a==="always"||a!==!1&&he(t,e)}return!1}function Ce(t,e,s,a){return(t!==e||I(a.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&he(t,s)}function he(t,e){return I(e.enabled,t)!==!1&&t.isStaleByTime(G(e.staleTime,t))}function ht(t,e){return!Y(t.getCurrentResult(),e)}var Me=p.createContext(!1),ut=()=>p.useContext(Me);Me.Provider;function dt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ft=p.createContext(dt()),mt=()=>p.useContext(ft),pt=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},gt=t=>{p.useEffect(()=>{t.clearReset()},[t])},bt=({result:t,errorResetBoundary:e,throwOnError:s,query:a})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&nt(s,[t.error,a]),vt=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},yt=(t,e)=>t.isLoading&&t.isFetching&&!e,xt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Se=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Rt(t,e,s){var u,U,v,_,B;if(typeof t!="object"||Array.isArray(t))throw new Error('Bad argument type. Starting with v5, only the "Object" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object');const a=Ge(),h=ut(),n=mt(),i=a.defaultQueryOptions(t);(U=(u=a.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||U.call(u,i),i._optimisticResults=h?"isRestoring":"optimistic",vt(i),pt(i,n),gt(n);const g=!a.getQueryCache().get(i.queryHash),[f]=p.useState(()=>new e(a,i)),y=f.getOptimisticResult(i),N=!h&&t.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(S=>{const q=N?f.subscribe(je.batchCalls(S)):xe;return f.updateResult(),q},[f,N]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),p.useEffect(()=>{f.setOptions(i,{listeners:!1})},[i,f]),xt(i,y))throw Se(i,f,n);if(bt({result:y,errorResetBoundary:n,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash)}))throw y.error;if((_=(v=a.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||_.call(v,i,y),i.experimental_prefetchInRender&&!Z&&yt(y,h)){const S=g?Se(i,f,n):(B=a.getQueryCache().get(i.queryHash))==null?void 0:B.promise;S==null||S.catch(xe).finally(()=>{f.updateResult()})}return i.notifyOnChangeProps?y:f.trackResult(y)}function Ct(t,e){return Rt(t,ct)}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var St=Ie("outline","moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wt=Ie("outline","sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]);function Ut(){return o.jsx("div",{children:o.jsx(Xe,{type:"search",placeholder:"Search...",className:"md:w-[100px] lg:w-[300px]"})})}function _t(){const{theme:t,setTheme:e}=We();return p.useEffect(()=>{const s=t==="dark"?"#020817":"#fff",a=document.querySelector("meta[name='theme-color']");a&&a.setAttribute("content",s)},[t]),o.jsx(Ne,{size:"icon",variant:"ghost",className:"rounded-full",onClick:()=>e(t==="light"?"dark":"light"),children:t==="light"?o.jsx(St,{size:20}):o.jsx(wt,{size:20})})}var ue="Avatar",[jt,Bt]=Ye(ue),[It,Te]=jt(ue),De=p.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[h,n]=p.useState("idle");return o.jsx(It,{scope:s,imageLoadingStatus:h,onImageLoadingStatusChange:n,children:o.jsx(le.span,{...a,ref:e})})});De.displayName=ue;var Oe="AvatarImage",ke=p.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:h=()=>{},...n}=t,i=Te(Oe,s),g=Nt(a,n.referrerPolicy),f=Ze(y=>{h(y),i.onImageLoadingStatusChange(y)});return Ae(()=>{g!=="idle"&&f(g)},[g,f]),g==="loaded"?o.jsx(le.img,{...n,ref:e,src:a}):null});ke.displayName=Oe;var Fe="AvatarFallback",Le=p.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...h}=t,n=Te(Fe,s),[i,g]=p.useState(a===void 0);return p.useEffect(()=>{if(a!==void 0){const f=window.setTimeout(()=>g(!0),a);return()=>window.clearTimeout(f)}},[a]),i&&n.imageLoadingStatus!=="loaded"?o.jsx(le.span,{...h,ref:e}):null});Le.displayName=Fe;function Nt(t,e){const[s,a]=p.useState("idle");return Ae(()=>{if(!t){a("error");return}let h=!0;const n=new window.Image,i=g=>()=>{h&&a(g)};return a("loading"),n.onload=i("loaded"),n.onerror=i("error"),n.src=t,e&&(n.referrerPolicy=e),()=>{h=!1}},[t,e]),s}var Qe=De,Pe=ke,Ue=Le;const _e=p.forwardRef(({className:t,...e},s)=>o.jsx(Qe,{ref:s,className:ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));_e.displayName=Qe.displayName;const Be=p.forwardRef(({className:t,...e},s)=>o.jsx(Pe,{ref:s,className:ce("aspect-square h-full w-full",t),...e}));Be.displayName=Pe.displayName;const qe=p.forwardRef(({className:t,...e},s)=>o.jsx(Ue,{ref:s,className:ce("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));qe.displayName=Ue.displayName;class At extends ot{constructor(){super("baseService")}getCustomerDashboardData(){return this.get("/dashboard/customer")}getDashbordCustomerPieData(){return this.get("/dashboard/customer/status-summary")}getDashbordCustomerChat(e){return this.get("/dashboard/customer/chart",e)}generateCustomerApiKey(){return this.get("/api-key/generate")}}const Et=new At,Mt=t=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t);function qt(){var n,i;const t=Je(),{user:e}=et(),{data:s,isLoading:a}=Ct({queryKey:["dashboard"],queryFn:async()=>{if(e!=null&&e.customer)return await Et.getCustomerDashboardData()},retry:2,staleTime:5*60*1e3});function h(){t("/sign-in")}return o.jsxs("div",{className:"flex  items-center justify-center gap-2",children:[(e==null?void 0:e.customer)&&o.jsx("div",{className:"flex flex-row gap-2 justify-start mr-2",children:a?o.jsx("div",{className:"flex h-12 items-center justify-center",children:o.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):o.jsxs("div",{className:"flex flex-col items-start justify-start",children:[o.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"SMS Balance"}),o.jsxs("p",{className:"text-sm font-semibold",children:[Mt(s==null?void 0:s.smsBalance)," SMS"]})]})}),o.jsxs(tt,{children:[o.jsx(st,{asChild:!0,children:o.jsx(Ne,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:o.jsxs(_e,{className:"h-10 w-10",children:[o.jsx(Be,{src:"/avatars/01.png",alt:"@shadcn"}),o.jsxs(qe,{children:[(n=e==null?void 0:e.firstName)==null?void 0:n.charAt(0).toUpperCase(),"  ",(i=e==null?void 0:e.lastName)==null?void 0:i.charAt(0).toUpperCase()]})]})})}),o.jsxs(rt,{className:"w-56",align:"end",forceMount:!0,children:[o.jsx(at,{className:"font-normal",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsxs("p",{className:"text-sm font-medium leading-none",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),o.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e==null?void 0:e.email})]})}),o.jsx(ye,{}),o.jsxs(it,{children:[o.jsx($,{onClick:()=>t("/profile"),children:"Profile"}),o.jsx($,{onClick:()=>t("/settings"),children:"Settings"}),o.jsx($,{children:"Billing"})]}),o.jsx(ye,{}),o.jsx($,{onClick:()=>h(),children:"Log out"})]})]})]})}export{_e as A,Ut as S,_t as T,qt as U,Be as a,qe as b,Et as d,Ct as u};
