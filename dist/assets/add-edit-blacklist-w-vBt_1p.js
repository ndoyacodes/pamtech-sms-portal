import{l as y,k,y as c,r as F,j as s,B as u}from"./index-d9TgJTTy.js";import{u as S}from"./index.esm-B6ab4Cq_.js";import{z as x}from"./index-C3hmKdn7.js";import{t as N}from"./zod-CLsu2KRF.js";import{F as B,a as j,b as h,c as p,d as b,e as f}from"./form-DxQsSBla.js";import{T as C}from"./textarea-DzV--754.js";import{I as E}from"./input-DpwfBUf3.js";import{L as m}from"./use-auth-store-CiawQdvf.js";import{S as P,T,U as q}from"./user-nav-1-09pvFT.js";import{u as v}from"./useMutation-scFYzLXQ.js";import{b as g}from"./blacklist.service-uYYP-i9s.js";import"./label-BkzUlrRU.js";import"./index-Chc_HW3c.js";import"./index-CD610jSn.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./instance-BGpPafi2.js";const D=()=>{const n=y(),r=k(),o=v({mutationFn:({data:e})=>g.createBlacklistEntry(e),onSuccess:()=>{n.invalidateQueries({queryKey:["blacklists"]}),r("/blacklists"),c.success("Added to blacklist successfully")},onError:e=>{var a,l;const i=((l=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to add to blacklist";c.error(i)}}),d=v({mutationFn:e=>g.deleteBlacklistEntry(e),onSuccess:()=>{r("/blacklists"),n.invalidateQueries({queryKey:["blacklists"]}),c.success("Removed from blacklist successfully")},onError:e=>{var a,l;const i=((l=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to remove from blacklist";c.error(i)}});return{addToBlacklist:o,removeFromBlacklist:d}},M=x.object({msisdn:x.string().nonempty({message:"Paste Numbers is required"}),reason:x.string().optional()}),R=[{label:", (Comma)",value:","}],es=()=>{const[n,r]=F.useState(","),{addToBlacklist:o}=D(),d=k(),e=S({resolver:N(M),defaultValues:{msisdn:"",reason:""}}),i=t=>{console.log("Submitted Data:",{...t}),o.mutate({data:t})},a=()=>{e.reset(),r(",")},l=()=>{a(),d("/blacklists")};return s.jsxs(m,{children:[s.jsxs(m.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[s.jsx(P,{}),s.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[s.jsx(T,{}),s.jsx(q,{})]})]}),s.jsx(m.Header,{children:s.jsx("h1",{className:"text-2xl font-bold",children:"Add SPam Word"})}),s.jsx(m.Body,{children:s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:s.jsx(B,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(i),className:"space-y-6",children:[s.jsx(j,{control:e.control,name:"msisdn",render:({field:t})=>s.jsxs(h,{children:[s.jsx(p,{children:"Paste Numbers *"}),s.jsx(b,{children:s.jsx(C,{placeholder:"Paste your blacklist numbers here",rows:6,...t})}),s.jsx(f,{})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{children:"Delimiter"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(t=>s.jsx(u,{type:"button",variant:n===t.value?"default":"outline",onClick:()=>r(t.value),children:t.label},t.value))})]}),s.jsx(j,{control:e.control,name:"reason",render:({field:t})=>s.jsxs(h,{children:[s.jsx(p,{children:"Reason"}),s.jsx(b,{children:s.jsx(E,{placeholder:"Optional",...t})}),s.jsx(f,{})]})}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx(u,{type:"submit",loading:o.isPending,disabled:o.isPending,children:"Save"}),s.jsx(u,{type:"button",variant:"outline",onClick:l,children:"Cancel"})]})]})})})})]})};export{es as AddBlacklistForm,es as default};
