import{j as e,B as s,l as a,r as l,c as t}from"./index-DgsANLC3.js";import{D as n,f as i,b as r,c,d as o,g as d,u as m,a as x,e as g,L as h}from"./use-auth-store-DlB6JPqf.js";import{u,S as j,T as p,U as N}from"./user-nav-BjY9odv6.js";import{u as w,T as f,a as v,b as C,c as b,f as S,d as y,e as P,g as k,h as I,i as R,j as F,k as V,l as M}from"./table-DgNG9M6V.js";import{D as z,C as A,d as D,e as E,M as H,f as K,A as G,g as U,h as T,E as $,i as q}from"./index-8bOQzAwE.js";import{S as B,a as L,b as O,c as J,d as Q}from"./select-B9KeDb6u.js";import{I as W}from"./input-BaSBk-Gd.js";import{I as X}from"./IconPlus-CVwxeCme.js";import{C as Y}from"./checkbox-CDTCacFG.js";import{u as Z}from"./users.service-DD9MpAtM.js";import"./index-D_xSc7Or.js";import"./index-ccUYw2Nl.js";import"./Combination-BCJfLLTG.js";import"./index-ByCmscx5.js";import"./index-BuCM2Ckj.js";import"./index-BQ1RgSiI.js";import"./instance-SAW19xTi.js";import"./index-DCG-2Pmh.js";import"./index-BEsgrMAU.js";function _({table:a}){return e.jsxs("div",{className:"flex items-center justify-between overflow-auto px-2",children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[a.getFilteredSelectedRowModel().rows.length," of"," ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(B,{value:`${a.getState().pagination.pageSize}`,onValueChange:e=>{a.setPageSize(Number(e))},children:[e.jsx(L,{className:"h-8 w-[70px]",children:e.jsx(O,{placeholder:a.getState().pagination.pageSize})}),e.jsx(J,{side:"top",children:[10,20,30,40,50].map((s=>e.jsx(Q,{value:`${s}`,children:s},s)))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," of"," ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(s,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(z,{className:"h-4 w-4"})]}),e.jsxs(s,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(A,{className:"h-4 w-4"})]}),e.jsxs(s,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(D,{className:"h-4 w-4"})]}),e.jsxs(s,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(E,{className:"h-4 w-4"})]})]})]})]})}function ee({table:a}){return e.jsxs(n,{children:[e.jsx(i,{asChild:!0,children:e.jsxs(s,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(r,{align:"end",className:"w-[150px]",children:[e.jsx(c,{children:"Toggle columns"}),e.jsx(o,{}),a.getAllColumns().filter((e=>void 0!==e.accessorFn&&e.getCanHide())).map((s=>e.jsx(d,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:e=>s.toggleVisibility(!!e),children:s.id},s.id)))]})]})}function se({table:l}){var t;const n=l.getState().columnFilters.length>0,{user:i}=m(),r=a();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(W,{placeholder:"Filter ...",value:(null==(t=l.getColumn("title"))?void 0:t.getFilterValue())??"",onChange:e=>{var s;return null==(s=l.getColumn("title"))?void 0:s.setFilterValue(e.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsx("div",{className:"flex gap-x-2",children:(null==i?void 0:i.customer)&&"ADMIN"===(null==i?void 0:i.role)&&e.jsxs(s,{variant:"default",onClick:()=>r("/users/add"),className:"h-8 px-2 lg:px-3",children:["New User",e.jsx(X,{className:"ml-2 h-4 w-4"})]})}),n&&e.jsxs(s,{variant:"ghost",onClick:()=>l.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(K,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(ee,{table:l})]})}function ae({columns:s,data:a,pagination:t,onPaginationChange:n,totalElements:i}){var r;const[c,o]=l.useState({}),[d,m]=l.useState({}),[x,g]=l.useState([]),[h,u]=l.useState([]),j=w({data:a,columns:s,state:{sorting:h,columnVisibility:d,rowSelection:c,columnFilters:x,pagination:t},manualPagination:!0,pageCount:Math.ceil(i/t.pageSize),onPaginationChange:e=>{const s="function"==typeof e?e(t):e;n(s)},enableRowSelection:!0,onRowSelectionChange:o,onSortingChange:u,onColumnFiltersChange:g,onColumnVisibilityChange:m,getCoreRowModel:M(),getFilteredRowModel:V(),getPaginationRowModel:F(),getSortedRowModel:R(),getFacetedRowModel:I(),getFacetedUniqueValues:k()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{table:j}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(f,{children:[e.jsx(v,{children:j.getHeaderGroups().map((s=>e.jsx(C,{children:s.headers.map((s=>e.jsx(b,{colSpan:s.colSpan,children:s.isPlaceholder?null:S(s.column.columnDef.header,s.getContext())},s.id)))},s.id)))}),e.jsx(y,{children:(null==(r=j.getRowModel().rows)?void 0:r.length)?j.getRowModel().rows.map((s=>e.jsx(C,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map((s=>e.jsx(P,{children:S(s.column.columnDef.cell,s.getContext())},s.id)))},s.id))):e.jsx(C,{children:e.jsx(P,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(_,{table:j})]})}function le({column:a,title:l,className:i}){return a.getCanSort()?e.jsx("div",{className:t("flex items-center space-x-2",i),children:e.jsxs(n,{children:[e.jsx(x,{asChild:!0,children:e.jsxs(s,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:l}),"desc"===a.getIsSorted()?e.jsx(G,{className:"ml-2 h-4 w-4"}):"asc"===a.getIsSorted()?e.jsx(U,{className:"ml-2 h-4 w-4"}):e.jsx(T,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(r,{align:"start",children:[e.jsxs(g,{onClick:()=>a.toggleSorting(!1),children:[e.jsx(U,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(g,{onClick:()=>a.toggleSorting(!0),children:[e.jsx(G,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.jsx(o,{}),e.jsxs(g,{onClick:()=>a.toggleVisibility(!1),children:[e.jsx($,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):e.jsx("div",{className:t(i),children:l})}function te({row:a}){const{user:l}=m();return"ADMIN"===(null==l?void 0:l.role)&&e.jsxs(n,{children:[e.jsx(x,{asChild:!0,children:e.jsxs(s,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(r,{align:"end",className:"w-[160px]",children:[e.jsx(g,{children:"Edit"}),e.jsx(g,{children:"Disable"})]})]})}const ne=[{id:"select",header:({table:s})=>e.jsx(Y,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>s.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(Y,{checked:s.getIsSelected(),onCheckedChange:e=>s.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:s})=>e.jsx(le,{column:s,title:"#"}),cell:({row:s})=>e.jsx("div",{className:"w-[80px]",children:s.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"firstName",header:({column:s})=>e.jsx(le,{column:s,title:"Name"}),cell:({row:s})=>e.jsx("div",{className:"w-[150px]",children:`${s.original.firstName} ${s.original.lastName}`})},{accessorKey:"email",header:({column:s})=>e.jsx(le,{column:s,title:"Email Address"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("email")})},{accessorKey:"phoneNumber",header:({column:s})=>e.jsx(le,{column:s,title:"Phone Number"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("phoneNumber")})},{accessorKey:"role",header:({column:s})=>e.jsx(le,{column:s,title:"Role"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("role")})},{id:"actions",cell:({row:s})=>e.jsx(te,{row:s})}];function ie(){const[s,a]=l.useState({pageIndex:0,pageSize:10}),[t,n]=l.useState({filters:[],sorts:[{key:"id",direction:"ASC"}],page:0,size:10}),{data:i,isLoading:r}=u({queryKey:["users",s.pageIndex,s.pageSize,t],queryFn:async()=>{const e={...t,page:s.pageIndex,size:s.pageSize},a=await Z.getUsers(e);return a||{content:a.content||[],totalElements:null==a?void 0:a.totalElements}},retry:2,staleTime:3e5});return e.jsxs(h,{children:[e.jsxs(h.Header,{sticky:!0,className:"mt-4 sm:mt-4 md:mt-0 lg:mt-0",children:[e.jsx(j,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(p,{}),e.jsx(N,{})]})]}),e.jsxs(h.Body,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's a list of all users"})]})}),r?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(ae,{data:i.content||[],columns:ne,pagination:s,onPaginationChange:a,totalElements:(null==i?void 0:i.totalElements)||0})})]})]})}export{ie as default};
