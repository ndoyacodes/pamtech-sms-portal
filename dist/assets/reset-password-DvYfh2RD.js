import{u as s,a as e,j as a,c as r,B as o,d as t}from"./index-DgsANLC3.js";import{C as n}from"./card-Cxkzk52A.js";import{t as i}from"./zod-8yhIYjTx.js";import{u as c}from"./index.esm-3KLEzfMo.js";import{z as d}from"./index-B0zZW6rS.js";import{F as l,a as m,b as x,c as j,d as p,e as f}from"./form-CU8rwvsz.js";import{I as u}from"./input-BaSBk-Gd.js";import{u as h}from"./useAuth-B71qKawx.js";import"./label-BTdkY-TR.js";import"./index-D_xSc7Or.js";import"./useMutation-Bxa_RUaj.js";import"./instance-SAW19xTi.js";const w=d.object({password:d.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:d.string()}).refine((s=>s.password===s.confirmPassword),{message:"Passwords do not match",path:["confirmPassword"]});function g({className:n,...d}){const{reset:g}=h(),{token:P}=s(),[N]=e(),b=N.get("userid")||"",y=c({resolver:i(w),defaultValues:{password:"",confirmPassword:""}});return a.jsx("div",{className:r("grid gap-6",n),...d,children:a.jsx(l,{...y,children:a.jsx("form",{onSubmit:y.handleSubmit((function(s){const e={password:s.password};let a="";P&&(a=P);const r={token:a,email:t(b),data:e};g.mutateAsync(r)})),children:a.jsxs("div",{className:"grid gap-2",children:[a.jsx(m,{control:y.control,name:"password",render:({field:s})=>a.jsxs(x,{className:"space-y-1",children:[a.jsx(j,{children:"New Password"}),a.jsx(p,{children:a.jsx(u,{type:"password",placeholder:"Password",...s})}),a.jsx(f,{})]})}),a.jsx(m,{control:y.control,name:"confirmPassword",render:({field:s})=>a.jsxs(x,{className:"space-y-1",children:[a.jsx(j,{children:"Confirm Password"}),a.jsx(p,{children:a.jsx(u,{type:"password",placeholder:"Confirm Password",...s})}),a.jsx(f,{})]})}),a.jsx(o,{className:"mt-2",loading:g.isPending,disabled:g.isPending,children:"Reset"})]})})})})}function P(){return a.jsx(a.Fragment,{children:a.jsx("div",{className:"container grid h-svh flex-col items-center justify-center bg-primary-foreground lg:max-w-none lg:px-0",children:a.jsx("div",{className:"mx-auto flex w-full flex-col justify-center space-y-2 sm:w-[480px] lg:p-8",children:a.jsxs(n,{className:"p-6",children:[a.jsx("div",{className:"mb-4 flex items-center justify-center py-4",children:a.jsx("img",{src:"/logo.png",alt:"opes logo",className:""})}),a.jsx("div",{className:"mb-2 flex flex-col space-y-2 text-left",children:a.jsx("h1",{className:"text-md font-semibold tracking-tight",children:"Reset Password"})}),a.jsx(g,{})]})})})})}export{P as default};
