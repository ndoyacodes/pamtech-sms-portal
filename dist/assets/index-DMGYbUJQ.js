import{j as e,B as i,r as m,c as N}from"./index-d9TgJTTy.js";import{D as j,f as A,b as f,c as z,d as b,g as H,a as I,e as g,L as h}from"./use-auth-store-CiawQdvf.js";import{u as K,S as B,T as E,U as L}from"./user-nav-1-09pvFT.js";import{u as U,g as q,a as G,b as $,c as O,d as Q,e as J,T as W,f as X,h as u,i as Y,j as v,k as Z,l as C}from"./table-DaUOpY8m.js";import{D as _,C as ee,d as se,e as ae,M as te,F as le,f as ne,A as p,g as S,h as ie,E as re,i as oe,j as ce}from"./index-CD610jSn.js";import{S as de,a as xe,b as me,c as ge,d as he}from"./select-cMMktxW9.js";import{I as ue}from"./input-DpwfBUf3.js";import{B as pe}from"./badge-DjWKEn-0.js";import{C as y}from"./checkbox-BGteumho.js";import{z as r}from"./index-C3hmKdn7.js";import{A as je}from"./instance-BGpPafi2.js";import"./index-Chc_HW3c.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./index-W6PM2pC6.js";import"./index-BCvMni3w.js";function fe({table:s}){return e.jsxs("div",{className:"flex items-center justify-between overflow-auto px-2",children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(de,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(xe,{className:"h-8 w-[70px]",children:e.jsx(me,{placeholder:s.getState().pagination.pageSize})}),e.jsx(ge,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(he,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(_,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(ee,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(se,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ae,{className:"h-4 w-4"})]})]})]})]})}function we({table:s}){return e.jsxs(j,{children:[e.jsx(A,{asChild:!0,children:e.jsxs(i,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(f,{align:"end",className:"w-[150px]",children:[e.jsx(z,{children:"Toggle columns"}),e.jsx(b,{}),s.getAllColumns().filter(a=>typeof a.accessorFn<"u"&&a.getCanHide()).map(a=>e.jsx(H,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:t=>a.toggleVisibility(!!t),children:a.id},a.id))]})]})}function Ne({table:s}){var t;const a=s.getState().columnFilters.length>0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(ue,{placeholder:"Filter ...",value:((t=s.getColumn("title"))==null?void 0:t.getFilterValue())??"",onChange:c=>{var d;return(d=s.getColumn("title"))==null?void 0:d.setFilterValue(c.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsx("div",{className:"flex gap-x-2",children:e.jsxs(i,{variant:"default",className:"h-8 px-2 lg:px-3",children:["Export",e.jsx(le,{className:"ml-2 h-4 w-4"})]})}),a&&e.jsxs(i,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(ne,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(we,{table:s})]})}function ve({columns:s,data:a,pagination:t,onPaginationChange:c,totalElements:d}){var w;const[P,R]=m.useState({}),[D,M]=m.useState({}),[k,F]=m.useState([]),[T,V]=m.useState([]),x=U({data:a,columns:s,state:{sorting:T,columnVisibility:D,rowSelection:P,columnFilters:k,pagination:t},manualPagination:!0,pageCount:Math.ceil(d/t.pageSize),onPaginationChange:n=>{const l=typeof n=="function"?n(t):n;c(l)},enableRowSelection:!0,onRowSelectionChange:R,onSortingChange:V,onColumnFiltersChange:F,onColumnVisibilityChange:M,getCoreRowModel:q(),getFilteredRowModel:G(),getPaginationRowModel:$(),getSortedRowModel:O(),getFacetedRowModel:Q(),getFacetedUniqueValues:J()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ne,{table:x}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(W,{children:[e.jsx(X,{children:x.getHeaderGroups().map(n=>e.jsx(u,{children:n.headers.map(l=>e.jsx(Y,{colSpan:l.colSpan,children:l.isPlaceholder?null:v(l.column.columnDef.header,l.getContext())},l.id))},n.id))}),e.jsx(Z,{children:(w=x.getRowModel().rows)!=null&&w.length?x.getRowModel().rows.map(n=>e.jsx(u,{"data-state":n.getIsSelected()&&"selected",children:n.getVisibleCells().map(l=>e.jsx(C,{children:v(l.column.columnDef.cell,l.getContext())},l.id))},n.id)):e.jsx(u,{children:e.jsx(C,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(fe,{table:x})]})}function o({column:s,title:a,className:t}){return s.getCanSort()?e.jsx("div",{className:N("flex items-center space-x-2",t),children:e.jsxs(j,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(i,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(p,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(S,{className:"ml-2 h-4 w-4"}):e.jsx(ie,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(f,{align:"start",children:[e.jsxs(g,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(S,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(g,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(p,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.jsx(b,{}),e.jsxs(g,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(re,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})}):e.jsx("div",{className:N(t),children:a})}const Ce=r.object({id:r.string(),date:r.string(),name:r.string(),type:r.string(),details:r.string(),amount:r.string(),status:r.string()});function Se({row:s}){const a=Ce.parse(s.original);return console.log(a),e.jsxs(j,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(i,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsx(f,{align:"end",className:"w-[160px]"})]})}const ye=[{value:"bug",label:"Bug"},{value:"feature",label:"Feature"},{value:"documentation",label:"Documentation"}],be=[{label:"Pending",value:"Pending",icon:ce},{label:"Paid",value:"Paid",icon:p}],Ie=[{id:"select",header:({table:s})=>e.jsx(y,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(y,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:s})=>e.jsx(o,{column:s,title:"#"}),cell:({row:s})=>e.jsx("div",{className:"w-[80px]",children:s.getValue("id")}),enableSorting:!1,enableHiding:!1},{accessorKey:"date",header:({column:s})=>e.jsx(o,{column:s,title:"Date"}),cell:({row:s})=>{const a=ye.find(t=>t.value===s.original.date);return e.jsxs("div",{className:"flex space-x-2",children:[a&&e.jsx(pe,{variant:"outline",children:a.label}),e.jsx("span",{className:"max-w-32 truncate font-medium sm:max-w-72 md:max-w-[31rem]",children:s.getValue("title")})]})}},{accessorKey:"name",header:({column:s})=>e.jsx(o,{column:s,title:"Name"}),cell:({row:s})=>e.jsx("div",{className:"w-[150px]",children:s.getValue("name")})},{accessorKey:"type",header:({column:s})=>e.jsx(o,{column:s,title:"Type"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("type")})},{accessorKey:"details",header:({column:s})=>e.jsx(o,{column:s,title:"Details"}),cell:({row:s})=>e.jsx("div",{className:"max-w-[200px] truncate",children:s.getValue("details")})},{accessorKey:"amount",header:({column:s})=>e.jsx(o,{column:s,title:"Amount"}),cell:({row:s})=>e.jsx("div",{className:"w-[100px]",children:s.getValue("amount")})},{accessorKey:"priority",header:({column:s})=>e.jsx(o,{column:s,title:"Priority"}),cell:({row:s})=>{const a=be.find(t=>t.value===s.getValue("priority"));return a?e.jsxs("div",{className:"flex items-center",children:[a.icon&&e.jsx(a.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.label})]}):null},filterFn:(s,a,t)=>t.includes(s.getValue(a))},{id:"actions",cell:({row:s})=>e.jsx(Se,{row:s})}];class Pe extends je{constructor(){super("baseService")}getInvoices(a){return this.get("/transactions/invoices",a)}}const Re=new Pe;function Je(){const[s,a]=m.useState({pageIndex:0,pageSize:10}),{data:t,isLoading:c}=K({queryKey:["invoices",s.pageIndex,s.pageSize],queryFn:async()=>await Re.getInvoices({page:s.pageIndex,size:s.pageSize}),retry:2,staleTime:5*60*1e3});return e.jsxs(h,{children:[e.jsxs(h.Header,{sticky:!0,className:"mt-4 lg:mt-0 md:mt-0 sm:mt-4",children:[e.jsx(B,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(E,{}),e.jsx(L,{})]})]}),e.jsxs(h.Body,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Invoices"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's a list of all invoices"})]})}),c?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(ve,{data:t||[],columns:Ie,pagination:s,onPaginationChange:a,totalElements:(t==null?void 0:t.totalElements)||0})})]})]})}export{Je as default};
