import{r as y,u as Z,j as e,B as N}from"./index-d9TgJTTy.js";import{u as J,S as X,T as Y,U as ee}from"./user-nav-1-09pvFT.js";import{L as l}from"./use-auth-store-CiawQdvf.js";import{C as m,a as u,b as j,c as p}from"./card-CWiURnhm.js";import{B as v}from"./badge-DjWKEn-0.js";import{c as R}from"./contacts.service-WxEaevo_.js";import{T as se,a as ae,b as O,d as G}from"./tabs-DtrY1U19.js";import{D as te,e as re,a as le,b as ie,c as ce}from"./dialog-BlA-gPk4.js";import{I as $}from"./input-DpwfBUf3.js";import{L as Q}from"./label-BkzUlrRU.js";import{u as de}from"./index.esm-B6ab4Cq_.js";import{u as ne}from"./phonebook-hoook-Bp-n6k82.js";import{a as r,D as me,b as xe}from"./delete-dialog-Ds0KPMum.js";import{C as W}from"./checkbox-BGteumho.js";import{C as oe}from"./circle-alert-BKjPlwrc.js";import{c as he}from"./createLucideIcon-BDxxsDtu.js";import{B as ue}from"./building-BwcEiMa8.js";import{G as je}from"./globe-8DnZdi9k.js";import{U as pe}from"./user-B16-2BYC.js";import{C as ge}from"./calendar-CpR0mcu4.js";import{f as g}from"./format-OUeO2N_p.js";import"./index-CD610jSn.js";import"./index-Chc_HW3c.js";import"./instance-BGpPafi2.js";import"./index-EIcx_2LO.js";import"./Combination-D2mTRfsA.js";import"./index-LU4gLCaG.js";import"./index-DT5heVsp.js";import"./index-BIPiAFp5.js";import"./useMutation-scFYzLXQ.js";import"./table-DaUOpY8m.js";import"./select-cMMktxW9.js";import"./index-W6PM2pC6.js";import"./index-BCvMni3w.js";import"./popover-CnlP89lX.js";import"./extends-CF3RwP-h.js";import"./separator-BUjyEJiy.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=he("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);function fe(){const[a,t]=y.useState(!1),{id:i}=Z(),{addContactToPhonebook:s}=ne(),{register:c,handleSubmit:f,reset:x}=de(),o=async h=>{try{const d={recipient:h.recipient,phoneBook:parseInt(i)};await s.mutate({data:d}),t(!1),x()}catch{}};return e.jsxs(te,{open:a,onOpenChange:t,children:[e.jsx(re,{asChild:!0,children:e.jsx(N,{variant:"default",children:"Add Phone Number"})}),e.jsxs(le,{className:"sm:max-w-[425px]",children:[e.jsx(ie,{children:e.jsx(ce,{children:"Add Phone Number"})}),e.jsxs("form",{onSubmit:f(o),className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Q,{htmlFor:"recipient",children:"Phone Number"}),e.jsx($,{id:"recipient",placeholder:"Enter phone number",...c("recipient",{required:!0})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Q,{htmlFor:"recipient",children:"Name"}),e.jsx($,{id:"name",placeholder:"Enter phone name",...c("name",{required:!1})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(N,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"}),e.jsx(N,{type:"submit",disabled:s.isPending,children:s.isPending?"Adding...":"Add Phone Number"})]})]})]})]})}const ve=[{id:"select",header:({table:a})=>e.jsx(W,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>a.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>e.jsx(W,{checked:a.getIsSelected(),onCheckedChange:t=>a.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:a})=>e.jsx(r,{column:a,title:"#"}),cell:({row:a})=>e.jsx("div",{className:"w-[80px]",children:a.index+1}),enableSorting:!1,enableHiding:!1},{accessorKey:"msisdn",header:({column:a})=>e.jsx(r,{column:a,title:"Number"}),cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("msisdn")})},{accessorKey:"col1",header:({column:a})=>e.jsx(r,{column:a,title:"Column B"}),cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("col1")})},{accessorKey:"col2",header:({column:a})=>e.jsx(r,{column:a,title:"Column C"}),cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("col2")})},{accessorKey:"col3",header:({column:a})=>e.jsx(r,{column:a,title:"Column D"}),cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("col3")})},{accessorKey:"col4",header:({column:a})=>e.jsx(r,{column:a,title:"Column E"}),cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("col4")})},{accessorKey:"col5",header:({column:a})=>e.jsx(r,{column:a,title:"Column F"}),cell:({row:a})=>e.jsx("div",{className:"max-w-[200px] truncate",children:a.getValue("col5")})},{accessorKey:"msisdn",header:({column:a})=>e.jsx(r,{column:a,title:"Action"}),cell:({row:a})=>{const[t,i]=y.useState(!1);return e.jsxs("div",{className:" truncate",children:[e.jsx(N,{onClick:()=>i(!0),size:"sm",variant:"destructive",children:"Delete"}),t&&e.jsx(me,{id:a.getValue("id"),name:a.getValue("msisdn"),onClose:()=>i(!1),type:"number"})]})}}],rs=()=>{var x,o,h,d,b,C,w,P,S,B,D,T,I,A,E,V,z,K,L,F,k,q,H,M,U;const{id:a}=Z(),[t,i]=y.useState({pageIndex:0,pageSize:10}),{data:s,isLoading:c,error:f}=J({queryKey:["phonebook",a,t.pageIndex,t.pageSize],queryFn:async()=>{if(!a)throw new Error("ID is required");const _=await R.getPhoneBookById(a),n=await R.getPhoneBookNUmbers(a,{page:t.pageIndex,size:t.pageSize});return{phonebook:_,numbers:n||{content:n.content||[],totalElements:n==null?void 0:n.totalElements}}},enabled:!!a});return console.log(s),c?e.jsx(l,{children:e.jsx(l.Body,{children:e.jsx("div",{className:"mx-auto max-w-6xl p-6",children:e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})})})})}):f?e.jsx(l,{children:e.jsx(l.Body,{children:e.jsx(m,{className:"mx-auto max-w-6xl p-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-destructive",children:[e.jsx(oe,{size:20}),e.jsx("p",{children:"Error loading phonebook details"})]})})})}):e.jsxs(l,{children:[e.jsxs(l.Header,{sticky:!0,className:"mt-4 sm:mt-4 md:mt-0 lg:mt-0",children:[e.jsx(X,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(Y,{}),e.jsx(ee,{})]})]}),e.jsx(l.Body,{children:e.jsxs(se,{orientation:"vertical",defaultValue:"numbers",className:"space-y-4",children:[e.jsx("div",{className:"mt-3 w-full overflow-x-auto pb-2",children:e.jsxs(ae,{children:[e.jsx(O,{value:"numbers",children:"Phone book numbers"}),e.jsx(O,{value:"phonebook-details",children:"Phone book details"})]})}),e.jsx(G,{value:"phonebook-details",className:"space-y-4 ",children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:(x=s==null?void 0:s.phonebook)==null?void 0:x.name}),e.jsx("p",{className:"text-muted-foreground",children:(o=s==null?void 0:s.phonebook)==null?void 0:o.description})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(v,{variant:(h=s==null?void 0:s.phonebook)!=null&&h.active?"default":"secondary",children:(d=s==null?void 0:s.phonebook)!=null&&d.active?"Active":"Inactive"}),((b=s==null?void 0:s.phonebook)==null?void 0:b.deleted)&&e.jsx(v,{variant:"destructive",children:"Deleted"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Phonebook Information"]})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact Count"}),e.jsx("p",{className:"text-lg font-medium",children:(C=s==null?void 0:s.phonebook)==null?void 0:C.count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"File Name"}),e.jsx("p",{className:"truncate text-sm font-medium",children:(P=(w=s==null?void 0:s.phonebook)==null?void 0:w.fileName)==null?void 0:P.split("/").pop()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created At"}),e.jsx("p",{className:"text-sm",children:g(new Date((S=s==null?void 0:s.phonebook)==null?void 0:S.createdAt),"PPp")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:g(new Date((B=s==null?void 0:s.phonebook)==null?void 0:B.updatedAt),"PPp")})]})]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Company"}),e.jsx("p",{className:"font-medium",children:(D=s==null?void 0:s.phonebook)==null?void 0:D.customer.companyName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Type"}),e.jsx(v,{variant:"outline",children:(T=s==null?void 0:s.phonebook)==null?void 0:T.customer.customerType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:(I=s==null?void 0:s.phonebook)==null?void 0:I.customer.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Timezone"}),e.jsx("p",{className:"text-sm",children:(A=s==null?void 0:s.phonebook)==null?void 0:A.customer.timezone})]}),((E=s==null?void 0:s.phonebook)==null?void 0:E.customer.website)&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Website"}),e.jsxs("a",{href:(V=s==null?void 0:s.phonebook)==null?void 0:V.customer.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(je,{className:"h-4 w-4"}),(z=s==null?void 0:s.phonebook)==null?void 0:z.customer.website]})]})]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Created By"]})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:`${(K=s==null?void 0:s.phonebook)==null?void 0:K.createdBy.firstName} ${(L=s==null?void 0:s.phonebook)==null?void 0:L.createdBy.lastName}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:(F=s==null?void 0:s.phonebook)==null?void 0:F.createdBy.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm",children:(k=s==null?void 0:s.phonebook)==null?void 0:k.createdBy.phoneNumber})]})]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Activity Timeline"]})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Created"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g(new Date((q=s==null?void 0:s.phonebook)==null?void 0:q.createdAt),"PPp")})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g(new Date((H=s==null?void 0:s.phonebook)==null?void 0:H.updatedAt),"PPp")})]})})]})})]})]})]})}),e.jsxs(G,{value:"numbers",className:"space-y-4 ",children:[e.jsxs("div",{className:"my-2 grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact Count"}),e.jsx("p",{className:"text-lg font-medium",children:(M=s==null?void 0:s.phonebook)==null?void 0:M.count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phonebook Name"}),e.jsx("p",{className:"truncate text-sm font-medium",children:(U=s==null?void 0:s.phonebook)==null?void 0:U.name})]})]}),e.jsx(fe,{}),c?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(xe,{data:s==null?void 0:s.numbers.content,columns:ve,isIndex:!1,pagination:t,onPaginationChange:i,totalElements:(s==null?void 0:s.numbers.totalElements)||0})})]})]})})]})};export{rs as PhonebookView,rs as default};
